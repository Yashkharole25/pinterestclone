"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[80659],{245160:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};r.hash="76b22cc5d658befe1dc27454d3aee77f",n.default=r},7209:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:r,storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="56ef15525cc9a2e668228985788e038e",n.default=i},77256:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="b3ec14d29962e56f80dd52e7e6d7a6d9",n.default=i},43607:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"}],type:"Pin",abstractKey:null};i.hash="c58f35d70fea0965bfcee8460bc7f26c",n.default=i},709140:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null}],type:"Pin",abstractKey:null};i.hash="1612c2df94f42990b3d4f6ccede72a70",n.default=i},560173:function(e,n,t){t.r(n);var r,i,o,a,l,s,c,u=(r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c=[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:r,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[o,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},a,{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,a,l],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:c,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:c,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"TrackingParamsMap",kind:"LinkedField",name:"trackingParamsMap",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"61ba87499f9c67761ba3bbd02c865cf8458b8f57dbff84f4990ba9486f30f59a",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});u.hash="d3e1e4d941555ea10fa16343ceeace98",n.default=u,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let n=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[n]=e}}}(u.default||u)},870893:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:r,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"useAndUpdatePinTrackingParamsMap_pin"},{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};i.hash="f6c1c0969b1887b1616fcfdadcf621cb",n.default=i},35934:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="f0b2fbadfba92480a2077999a000a308",n.default=i},59363:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useAndUpdatePinTrackingParamsMap_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"TrackingParamsMap",kind:"LinkedField",name:"trackingParamsMap",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}]}],type:"Pin",abstractKey:null};r.hash="79cec8fe803f71bf5b269a0cd517ae50",n.default=r},733935:function(e,n,t){t.r(n);var r,i,o,a,l,s={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l],storageKey:null}]},params:{id:"0bc9194565339eb122f7cb6b1d5e725f87ffaa6eb7902cc6cb99123110ca9260",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="916a5869ddd0c416de3fc6f310e60323",n.default=s,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let n=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[n]=e}}}(s.default||s)},86785:function(e,n,t){t.d(n,{G6:function(){return o},i7:function(){return a},oi:function(){return r},u$:function(){return i},un:function(){return s},vU:function(){return l},w1:function(){return c}});var r=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=function(e){return e?e.includes("Chrome")?r.CHROME:e.includes("Safari")?r.SAFARI:e.includes("Firefox")?r.FIREFOX:e.includes("Opera")?r.OPERA:e.includes("IE")?r.IE:e.includes("Edge")?r.EDGE:r.OTHER:r.OTHER};function o(e){return i(e)===r.SAFARI}function a(e){return i(e)===r.CHROME}function l(e){return i(e)===r.FIREFOX}function s(e){return i(e)===r.EDGE}function c(e){return i(e)===r.IE}},673500:function(e,n,t){var r=t(42279),i=t(549216),o=t(698681),a=t(226618);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n,t){var r;return(r=function(e,n){if("object"!==l(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"===l(r)?r:String(r))in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){var n=e.strategy,t=e.query,l=e.variables,c=e.options,u=e.transformGraphQL,d=e.useGetLegacyData,f=e.useGetLegacyResource,p=e.useGetLegacyPaginatedResource,h=e.rootFieldName,y=e.type1,m=e.type2,_=e.connectionName;if("GRAPHQL"===n){var b=(0,i.getRequest)(t);return null!=u?u((0,r.useLazyLoadQuery)(b,l,c)):(0,r.useLazyLoadQuery)(b,l,c)}if(null!=d&&null!=f&&null!=p)throw Error("Only pass one of useGetLegacyData or useGetLegacyResource to useLazyLoadQueryOrLegacy");if(null!=d){var g=d(l);return g?(0,a.I9)({},{data:g,refetchInfo:null,paginationInfo:null}):null}if(null!=f){var v=f(l),P=v.data,S=v.refresh;return null==P?null:(0,a.I9)({},{data:P,refetchInfo:{refetch:S},paginationInfo:null})}if(null!=p){var x=p(l),I=x.data,j=x.refresh,w=x.isFetching,A=x.isAtEnd,k=x.fetchMore;if(null==I)return null;if(null==h||null==y||null==m||null==_)throw Error("Unexpected null param");return(0,a.I9)({},{data:s({},(0,o.Cs)(h),{type:y,data:s({type:m},(0,o.Cs)("__".concat(_,"_connection")),{edges:I.map(function(e){return{node:e}})})}),refetchInfo:{refetch:j},paginationInfo:{isLoadingNext:w,hasNext:!A,loadNext:k}})}throw Error("useGetLegacyData or useGetLegacyResource must be provided")}},160133:function(e,n,t){var r=t(684404),i=t(213377),o=t(403862),a=t(554786),l=t(819267);n.Z=function(e){var n=e.children,t=e.roundedForLargeDevice,s="phone"!==(0,a.ZP)()&&t;return(0,o.V)()?(0,l.jsx)(r.xu,{marginEnd:-i.D6,marginStart:-i.D6,overflow:s?"hidden":void 0,rounding:s?6:void 0,children:(0,l.jsx)(o.C,{value:!1,children:n})}):n}},891162:function(e,n,t){t.d(n,{Q6:function(){return u},qe:function(){return s},yU:function(){return c}});var r=t(520893),i=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},o=function(e){return e};function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(r){var i=[];return function(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];var s=i.find(function(e){return n(e.args,t(a))});if(s)return s.result;var c=r.apply(void 0,a);return i.push({args:t(a),result:c}),e&&i.length>e&&i.shift(),c}}}var l=a();n.ZP=l;var s=a(1),c=a(void 0,i,function(e){return[JSON.stringify(e)]}),u=a(0,function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,r.Z)(e,n[t])})})},826267:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(839967),i=t(637253);function o(e){var n=null!=e?e:{name:r.fY,options:null},t=n.headers,o=n.name,a=n.options,l=n.schema,s=!e,c=(0,i.Z)({headers:t,name:o,noCache:!1,options:a,schema:l},!1,s,!1),u=c.fetchResource,d=c.ref;return s||u(),d}},325362:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){return e.replace(/[_.-](\w|$)/g,function(e,n){return n.toUpperCase()})}},193163:function(e,n,t){t.d(n,{T7:function(){return o},Y_:function(){return c},bl:function(){return l},d9:function(){return d},nx:function(){return u},xt:function(){return s}});var r=t(5859),i=t(149722);function o(e,n,t,r){var i=t.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-");return"/today/".concat(n?"shop":0===e||2===e?"trending":1===e?"best":"article","/").concat(encodeURIComponent(i),"/").concat(r,"/")}var a={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]};function l(){var e,n=(0,r.B)(),t=(0,i.Z)(),o=t.isAuth?t.country:n.country;return void 0!==n&&void 0!==n.locale&&(null===(e=a[n.locale.substring(0,2)])||void 0===e?void 0:e.includes(o))}var s=function(e,n,t){return e||n||t||""},c=function(e){return"todayarticle"===e.type},u=function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"story"===e.type})},d=function(e,n){return(null!=e?e:1)/(null!=n?n:1)}},446653:function(e,n,t){t.d(n,{r:function(){return k},K:function(){return A}});var r=t(672652),i=t(342513),o=t(340523),a=t(757640),l=t(149722),s=t(998577),c=t(573810),u=t(325362);function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function e(n){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("object"!==p(n[r])||null===n[r]||Array.isArray(n[r])?t[(0,u.Z)(r)]=n[r]:t[(0,u.Z)(r)]=e(n[r]));return t},y=function(e,n){var t=[];for(var r in e)r!==n&&t.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===p(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({id:r},h(e[r])));var i,o=t.sort(function(e,n){var t=e.user.businessName,r=n.user.businessName;return t.localeCompare(r)}),a=new Map,l=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}}(e))){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(l)throw o}}}}(o);try{for(l.s();!(i=l.n()).done;){var s=i.value;a.set(s.id,s)}}catch(e){l.e(e)}finally{l.f()}return a};function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==m(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===m(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var v={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},P=function(e,n){switch(n.type){case"LOAD_PROFILES":return g(g({},e),{},{profiles:n.payload});case"SET_ACTIVE_PROFILE":return g(g({},e),{},{activeProfile:n.payload});case"TOGGLE_HEADER_VISIBILITY":return g(g({},e),{},{headerVisible:n.payload});case"TOGGLE_ORBAC_VISIBILITY":return g(g({},e),{},{orbacVisibility:n.payload});case"TOGGLE_DISABLE_PROFILE_CHANGER":return g(g({},e),{},{disableProfileChanger:n.payload});default:return e}},S=function(e){var n=e.dispatch,t=e.isEnabled,i=e.state,o=i.orbacVisibility,a=i.disableProfileChanger,l=i.headerVisible;return{changeProfile:(0,r.useCallback)(function(e){t&&n({type:"SET_ACTIVE_PROFILE",payload:e})},[t,n]),toggleORBACVisibility:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=e?e:!o})},[t,n,o]),toggleDisableProfileChanger:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=e?e:!a})},[t,n,a]),toggleHeaderVisibility:(0,r.useCallback)(function(e){t&&n({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=e?e:!l})},[t,n,l])}},x=function(e){var n,t=function(e){if(Array.isArray(e))return e}(n=(0,r.useReducer)(P,v))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(n,2)||function(e,n){if(e){if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=t[0],o=t[1],a=S({dispatch:o,isEnabled:e,state:i}),l=i.activeProfile,s=i.orbacVisibility;return(0,r.useEffect)(function(){var e=(0,c.qn)("orbacActiveProfile",!1);e&&o({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(function(){var e=(0,c.qn)("orbacVisibilty",!1);e&&o({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(function(){(0,c.Nh)("orbacVisibility",s)},[s]),(0,r.useEffect)(function(){(0,c.Nh)("orbacActiveProfile",l)},[l]),{state:i,actions:a,receiveProfiles:(0,r.useCallback)(function(e,n){o({type:"LOAD_PROFILES",payload:y(e,n)})},[o])}},I=t(819267),j=(0,i.Z)("RoleBasedAccessControlContext"),w=j.Provider,A=j.useMaybeHook,k=function(e){var n,t=e.children,i=(0,o.F)().checkExperiment,c=(0,l.Z)(),u=!!(c.isAuth&&c.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),d=x(u),f=d.state,p=d.actions,h=d.receiveProfiles,y=f.activeProfile,m=f.headerVisible,_=f.profiles,b=void 0===_?[]:_,g=b?Array.from(b.values()):[],v=(0,s.Z)(g),P=!!c.isAuth&&g.length>0&&v,S=c.isAuth?c.id:"",j=c.isAuth?c.username:"",A=p.changeProfile,k=p.toggleORBACVisibility,O=p.toggleDisableProfileChanger,E=p.toggleHeaderVisibility;(0,r.useEffect)(function(){if(u){if("string"==typeof v){A(v);return}y||A(S)}},[v,S,u,A,y]),(0,r.useEffect)(function(){u&&(P&&!m&&E(!0),!P&&m&&E(!1))},[E,P,u,m,b]);var R=(0,a.Z)(u?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null).data,T=null==R?void 0:R.profiles;c&&c.isAuth&&f.activeProfile===c.id?n={id:c.id,permissions:["OWNER"],user:{username:j,businessName:c.fullName,imgUrl:c.imageSmallUrl}}:y&&f.profiles&&(n=f.profiles.get(y)),(0,r.useEffect)(function(){T&&h(T,S)},[h,T,S]);var B=f.profiles?Array.from(f.profiles.values()):[];return(0,I.jsx)(w,{value:{profiles:B,headerVisible:f.headerVisible,activeProfile:n,changeProfile:A,toggleORBACVisibility:k,toggleDisableProfileChanger:O,toggleHeaderVisibility:E},children:t})}},785059:function(e,n,t){var r=t(340523),i=t(446653),o=t(998577);n.Z=function(){var e=(0,r.F)().checkExperiment,n=(0,i.K)(),t=(n||{}).activeProfile,a=e("web_m10n_business_access_orbac_www").anyEnabled,l=(0,o.Z)((null==n?void 0:n.profiles)||[]),s=e("useorbacroutematcher_in_useorbacactingas").anyEnabled;return a&&(!s||l)&&t&&(t.viewerMeetsMfaRequirement||(t.permissions||[]).includes("OWNER"))?t:Object.freeze({})}},998577:function(e,n,t){var r=t(328038),i=t(96157),o=t(340523),a=t(149722),l=t(19447);n.Z=function(e){var n,t,s,c,u=(0,r.TH)(),d=(0,a.Z)(),f=(0,l.S6)(),p=(0,o.F)().checkExperiment("web_m10n_business_access_orbac_www").anyEnabled,h=(0,r.$B)("/:username"),y=null==h?void 0:null===(n=h.params)||void 0===n?void 0:n.username,m=(0,r.$B)("/pin/:id"),_=null!=m&&null!==(t=m.params)&&void 0!==t&&!!t.id&&(null===(s=f(m.params.id))||void 0===s?void 0:null===(c=s.pinner)||void 0===c?void 0:c.id);if((0,i.ej)(u))return!1;if((0,i.RU)(u))return!0;if((0,i.mY)(u))return p;var b=e.concat(d.isAuth?{user:{username:d.username},id:d.id}:{}).find(function(e){var n=e||{},t=n.user,r=n.id,i=(void 0===t?{}:t).username;return(!!i&&!!y||!!_&&!!r)&&(i===y||_===r)});return!!b&&b.id}},199677:function(e,n,t){t.d(n,{D3:function(){return c},DX:function(){return l},KY:function(){return u},Ms:function(){return r},N1:function(){return d},_P:function(){return a},lJ:function(){return o},nl:function(){return i},q6:function(){return s}});var r=function(e,n){var t=e&&e.isAuth?e.username:"";return e&&n&&n.user&&n.user.username&&(t=n.user.username),t},i=function(e,n){return!!(n&&n.user&&e&&e.isAuth&&n.id!==e.id?n.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool)},o=function(e,n){return e&&e.isAuth&&n&&n.id&&n.id!==e.id?n.id:""},a=function(e,n,t){var r;return t&&t.user&&n&&n.isAuth&&t.id!==n.id?t.user.merchantId:null===(r=e.advertiser)||void 0===r?void 0:r.merchant_id},l=function(e,n,t){return t&&t.user&&e.isAuth&&t.id!==e.id?t.user.scheduledPinCount||0:e.isAuth&&n&&n.scheduled_pin_count||0},s=function(e,n,t){return!!(e&&e.isAuth&&t&&t.id&&t.id!==e.id&&t.id===n)},c=function(e,n,t){return!!(s(e,n,t)||e&&e.isAuth&&n===e.id)},u=function(e,n,t){return c(e,n&&n.owner&&n.owner.id||"",t)};function d(e,n,t){return c(e,n?n.id:"",t)}},490166:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(684404),i=t(819267);function o(e){var n=e.children,t=e.onMouseEnter,o=e.onMouseLeave,a=e.onTouch,l=e.rounding,s=e.fullWidth,c=e.pressState,u=void 0===c?"none":c,d=e.accessibilityLabel,f=e.role,p=(Array.isArray(u)?u:[u]).includes("compress");return(0,i.jsx)(r.iP,{accessibilityLabel:d,fullWidth:void 0!==s&&s,onMouseEnter:t&&function(e){return t(e.event)},onMouseLeave:o&&function(e){return o(e.event)},onTap:a&&function(e){return a(e.event)},role:f,rounding:l,tapStyle:p?"compress":"none",children:n})}},86967:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(684404),i=t(140017),o=t(165706),a=t(179425),l=t(913449),s=t(125768),c=t(819267);function u(e){var n=(0,i.ZP)(),t=e.backButtonIcon,u=e.errorMessage,d=e.name,f=e.onNextButtonTouch,p=e.onNameChange,h=e.selectedPinIds,y=void 0===h?[]:h,m=e.useRoundedCorners,_=y.length>0?130:64;return(0,c.jsxs)(a.default,{hasFixedHeader:!0,children:[(0,c.jsxs)(o.FixedHeader,{height:_,paddingY:3,useRoundedCorners:m,children:[(0,c.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(s.Z,{color:"darkGray",icon:t||"cancel",padding:3,size:"sm"}),(0,c.jsx)(r.X6,{accessibilityLevel:1,size:"300",children:n._('Add section', 'for add board section page', 'for add board section page')}),(0,c.jsx)(r.xu,{"data-test-id":"create-section-button",children:(0,c.jsx)(r.zx,{accessibilityLabel:n._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),color:"red",disabled:""===d.trim(),onClick:f,size:"lg",text:n._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),y&&(0,c.jsx)(l.Z,{selectedPinIds:y})]}),(0,c.jsx)(r.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,c.jsx)(r.nv,{errorMessage:u||"",id:"section-name-input",label:n._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:function(e){return p(e.event)},size:"lg",value:d})})]})}},533232:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(672652),i=t(780277),o=t(684404),a=t(140017),l=t(870319),s=t(149722),c=t(892185),u=t(296011),d=t(951766),f=t(900876),p=t(819267);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var y=function(){var e=(0,s.Z)().id;return(0,l.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),(0,i.useSelector)(function(e){return(0,u.Z)(e)||[]})};function m(e){var n,t=e.excludeBoardId,i=e.hideSectionPickerList,l=e.onRepin,s=(0,a.ZP)(),u=y(),m=function(e){if(Array.isArray(e))return e}(n=(0,r.useState)(null))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(n,2)||function(e,n){if(e){if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),_=m[0],b=m[1],g=function(e,n){if(!i&&e&&n){b(n);return}l(n)};return u.length>0&&(_&&!i?(0,p.jsx)(f.Z,{boardId:null==_?void 0:_.id,repin:function(e,n){_&&l(_,n)},showSectionRep:!0}):(0,p.jsxs)(o.xu,{"data-test-id":"board-picker-row-container",children:[(0,p.jsx)(o.xu,{marginTop:3,children:(0,p.jsx)(o.xv,{children:s._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"".concat(c.T,"px")}},paddingY:3,children:u.filter(function(e){return e.id!==t}).map(function(e){return(0,p.jsx)(d.Z,{boardId:e.id,onBoardSelected:function(n){return g(n,e)}},e.id)})})]}))}},676166:function(e,n,t){t.d(n,{Wx:function(){return T}});var r=t(672652),i=t(780277),o=t(328038),a=t(684404),l=t(454514),s=t(140017),c=t(165706),u=t(179425),d=t(13848),f=t(892185),p=t(533232),h=t(913449),y=t(490166),m=t(402287),_=t(125768),b=t(900876),g=t(819267);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach(function(n){O(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function x(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function I(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function a(e){x(o,r,i,a,l,"next",e)}function l(e){x(o,r,i,a,l,"throw",e)}a(void 0)})}}function j(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function w(e,n){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function A(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,n,t){return(n=E(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){var n=function(e,n){if("object"!==v(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===v(n)?n:String(n)}function R(e,n,t){return e?t._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):n?t._('Saved to section!', ' - ', ' -- '):t._('Saved to board!', ' - ', ' -- ')}function T(e){var n=e.onAddNewSection,t=e.useIconWithBackground,r=(0,s.ZP)();return(0,g.jsx)(c.FixedFooter,{alignCenter:t,height:t?f.y:f.T,children:(0,g.jsx)(y.Z,{onTouch:n,pressState:"none",children:(0,g.jsxs)(a.xu,{alignItems:"center","data-test-id":"addSectionButton",display:"flex",padding:t?0:1,children:[t?(0,g.jsx)(a.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,g.jsx)(a.JO,{accessibilityLabel:r._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button'),color:"default",icon:"add",size:20})}):(0,g.jsx)(a.JO,{accessibilityLabel:r._('Add section button', ' - ', ' -- '),color:"error",icon:"add-circle",size:38}),t?(0,g.jsx)(a.xu,{marginStart:2,children:(0,g.jsx)(a.xv,{size:"400",weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,g.jsx)(a.xu,{marginStart:3,children:(0,g.jsx)(a.xv,{weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}var B=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&w(e,n)}(o,e);var n,t,r,i=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=k(o);if(n){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===v(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return A(e)}(this,e)});function o(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return O(A(e=i.call.apply(i,[this].concat(t))),"onRepinToBoard",function(n){n.section_count?e.props.onRepinToBoardWithSections(n):e.props.repinToOtherBoard(n.id,e.props.i18n)}),e}return t=[{key:"render",value:function(){var e=this.props,n=e.boardId,t=e.boardSectionId,r=e.orginalBoardId,i=e.onAddNewSection,o=e.repin,l=e.hideBoardPickerRow,s=e.selectedPinIds,d=e.isCollaborative,f=r===n;return(0,g.jsxs)(u.default,{hasFixedHeader:!0,children:[(0,g.jsxs)(c.FixedHeader,{hasBorder:!0,height:140,children:[(0,g.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,g.jsx)(a.xu,{column:2,children:(0,g.jsx)(_.Z,{})}),(0,g.jsx)(a.xu,{column:8,children:(0,g.jsx)(a.X6,{accessibilityLevel:1,align:"center",size:"300",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,g.jsx)(a.xu,{column:2})]}),(0,g.jsx)(h.Z,{selectedPinIds:s})]}),n&&(0,g.jsx)(b.Z,{boardId:n,hideBoardPickerRow:f&&l,originalBoardId:r,repin:o,sectionId:t}),f&&(0,g.jsxs)(a.xu,{children:[!d&&(0,g.jsx)(p.Z,{excludeBoardId:n,hideSectionPickerList:!0,onRepin:this.onRepinToBoard}),(0,g.jsx)(T,{onAddNewSection:i})]})]})}}],j(o.prototype,t),r&&j(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.PureComponent);n.ZP=function(e){var n,t,r=e.inSelectAll,a=e.pinIds,c=e.orginalBoardId,u=e.boardSectionId,f=e.onRefreshBoardSection,p=e.url,h=(0,d.F9)().showToast,y=(0,s.ZP)(),_=(0,o.k6)(),b=(0,i.useDispatch)(),v=(n=I(regeneratorRuntime.mark(function e(n,t,i){var o,s,d,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t&&t.id,s={boardId:c,sectionId:u},d={boardId:n,sectionId:o},y=r?(0,m.X_)({source:s,target:d,excludePinIds:a}):(0,m.Kw)({source:s,target:d,pinIds:a}),!(c!==n)){e.next=10;break}return e.next=7,b(y);case 7:_.push({pathname:p}),e.next=15;break;case 10:return e.next=12,b(y);case 12:if(!f){e.next=15;break}return e.next=15,f();case 15:h(function(e){var n=e.hideToast;return(0,g.jsx)(l.ZP,{onHide:n,text:R(r,o,i)})});case 16:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)}),P=(t=I(regeneratorRuntime.mark(function e(n,t){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={boardId:c,sectionId:u},o={boardId:n,sectionId:void 0},h(function(e){var n=e.hideToast;return(0,g.jsx)(l.ZP,{onHide:n,text:R(r,void 0,t)})}),e.next=5,b(r?(0,m.X_)({source:i,target:o,excludePinIds:a}):(0,m.Kw)({source:i,target:o,pinIds:a}));case 5:_.go(-2);case 6:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)});return(0,g.jsx)(B,S(S({},e),{},{i18n:y,repin:v,repinToOtherBoard:P}))}},913449:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(672652),i=t(684404),o=t(140017),a=t(19447),l=t(819267);function s(e){var n=e.selectedPinIds,t=(0,o.ZP)(),s=(0,r.useRef)(),c=(0,a.AF)(),u=(n||[]).map(function(e){return c[e]}).filter(Boolean);(0,r.useEffect)(function(){var e=s.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[u]);var d=u.map(function(e,n){var r,o,a,s,c=e.description,u=e.images,d=null==u?void 0:u["236x"];return(0,l.jsx)(i.xu,{marginEnd:1,children:(0,l.jsx)(i.zd,{height:65,rounding:2,wash:!0,width:50,children:(0,l.jsx)(i.Ee,{alt:!!(null!=c&&c.trim())&&(null==c?void 0:c.trim())||t._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:null!==(r=e.dominant_color)&&void 0!==r?r:"",fit:"contain",naturalHeight:null!==(o=null==d?void 0:d.height)&&void 0!==o?o:1,naturalWidth:null!==(a=null==d?void 0:d.width)&&void 0!==a?a:1,src:null!==(s=null==d?void 0:d.url)&&void 0!==s?s:""})})},n)});return(0,l.jsx)(i.xu,{ref:s,display:"flex",marginTop:2,overflow:"scroll",children:d})}},892185:function(e,n,t){t.d(n,{T:function(){return r},y:function(){return i}});var r=70,i=80},739382:function(e,n,t){t.d(n,{Bb:function(){return y},Bx:function(){return l},F4:function(){return a},Qj:function(){return s},_6:function(){return h},gv:function(){return o},hg:function(){return c},is:function(){return f},jP:function(){return p},lt:function(){return i},oM:function(){return u},wI:function(){return d}});var r=t(624797),i=function(e){return e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal')},o=function(e){var n=e.firstName,t=e.i18n;return n?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",n):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board')},a=function(e){var n=(0,r.mB)(e.search).board_url;if(n){var t=(0,r.Jx)(n),i=(0,r.XP)({accept_invite:!0,seamless:!0});return t.includes("?")?"".concat(t,"&").concat(i):"".concat(t,"?").concat(i)}return e.pathname},l=function(e){return e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.')},s=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/repin/")}return n},c=function(e){return e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.')},u=function(e){return e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.')},d=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/edit/")}return n},f=function(e){return e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},p=function(e){return e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.')},h=function(e){return e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.')},y=function(e){return e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')}},121228:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(140017),i=t(739382),o=t(166770),a=t(819267);function l(e){var n=e.children,t=e.callbackFunction,l=e.modalHeader,s=e.nextLocation,c=(0,r.ZP)(),u=(0,o.H)(),d=u.viewer,f=u.loginForMore,p=u.limitedLoginModalSubheader,h=u.limitedLoginModalNextLocation,y="LIMITED_LOGIN"===d.type;return(0,a.jsx)("div",{onClickCapture:function(e){y&&(t&&t(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),null==f||f.setVisible(!0),null==p||p.setText(l||(0,i.lt)(c)),s&&(null==h||h.setRoute(s)))},children:n})}},793545:function(e,n,t){t.d(n,{ZP:function(){return n$}});var r,i,o,a,l,s,c,u,d,f,p=t(672652),h=t(780277),y=t(42279),m=t(328038),_=t(684404),b=t(587703),g=t(25919),v=t(190971),P=t(930837),S=t(844683),x=t(454514),I=t(207012),j=t(673500),w=t(140017),A=t(339001),k=t(681508),O=t(165706),E=t(179425),R=t(409403),T=t(991944);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){L(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function L(e,n,t){var r;return(r=function(e,n){if("object"!==B(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==B(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"===B(r)?r:String(r))in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var D=void 0!==r?r:r=t(59363),Z=function(e,n){var t=(0,I.Z)(D,e),r=(0,h.useDispatch)(),i=null;if(null!=t&&t.trackingParamsMap&&(i=t.trackingParamsMap.reduce(function(e,n){if(null!=n&&n.key){var t;return F(F({},e),{},L({},n.key,null!==(t=n.data)&&void 0!==t?t:""))}return e},{})),(0,p.useEffect)(function(){null!=t&&t.trackingParams&&r((0,R.Er)({id:t.entityId,nodeId:t.__id,resource:n,value:t.trackingParams}))},[r,null==t?void 0:t.entityId,null==t?void 0:t.__id,null==t?void 0:t.trackingParams]),null!=t&&t.trackingParams){var o=(0,T.P)(n.name,n.options);return F(F({},i),{},L({},o,null==t?void 0:t.trackingParams))}return i},z=t(340523),N=t(826267),K=t(870319),M=t(554786),H=t(149722),U=t(676166),G=t(254292),W=t(638365);function V(e,n){return!!(e&&e.placement_id&&e.experience_id===n)}var Y=t(739382),q=t(121228),Q=t(891162),X=t(819267);function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ee="cubic-bezier(0.66, 0.025, 0.33, 0.975)",en=(0,Q.qe)(function(e,n,t,r,i){var o=e,a=n,l=0,s=0,c="",u=Math.floor(n/3);if("shrinkToPin"===t&&(l="24px",s=1,o=Math.floor(3*u/2),a=u),"pinToGrid"===t&&r&&i){var d=r.getBoundingClientRect(),f=i.getBoundingClientRect(),p=f.x+f.width/2-(d.x+d.width/2),h=f.y+f.height/2-(d.y+d.height/2);c="translate(".concat(p,"px, ").concat(h,"px)"),l="24px 0px 0px 24px",s=1,o=u,a=u}return{borderRadius:l,height:o,opacity:s,overflow:"hidden",width:a,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:"all .42s ".concat(ee),transition:"all .42s ".concat(ee)}}),et=(0,Q.qe)(function(e){return{opacity:e?1:0,WebkitTransition:"opacity .42s ".concat(ee),transition:"opacity .42s ".concat(ee)}}),er=(0,Q.qe)(function(e){return{opacity:e?0:1,WebkitTransition:"all .25s ".concat(ee),transition:"all .25s ".concat(ee),zIndex:3}});function ei(e){var n,t,r,i,o=e.completeExperience,a=e.pinDominantColor,l=e.pinImageHeight,s=e.pinImageWidth,c=e.pinImageUrl,u=(0,w.ZP)(),d=$((0,p.useState)("visible"),2),f=d[0],h=d[1],y=$((0,p.useState)("none"),2),m=y[0],b=y[1],g=window.innerWidth,v=g*(l/s),P=Math.floor(g/3),S=Math.floor(g/6);(0,p.useEffect)(function(){c&&"none"===m&&(n=setTimeout(function(){b("shrinkToPin")},85)),c&&"shrinkToPin"===m&&(t=setTimeout(function(){b("pinToGrid")},2e3)),"pinToGrid"===m&&"visible"===f&&(r=setTimeout(function(){h("hidden")},2e3)),"hidden"===f&&(i=setTimeout(function(){h("none"),o()},300))}),(0,p.useEffect)(function(){return function(){clearTimeout(n),clearTimeout(t),clearTimeout(r),clearTimeout(i)}},[]);var x=(0,p.useRef)(null),I=(0,p.useRef)(null);return(0,X.jsxs)(_.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:er("hidden"===f)},direction:"column",display:"none"===f?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,X.jsxs)(_.xu,{alignItems:"center",display:"flex",height:g/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,X.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:et("pinToGrid"===m)},position:"absolute",children:(0,X.jsx)(_.zd,{height:P,rounding:6,width:P+S+1,children:(0,X.jsxs)(_.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,X.jsx)(_.xu,{ref:I,color:"transparent",height:P,width:P}),(0,X.jsxs)(_.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,X.jsx)(_.xu,{color:"secondary",height:S,width:S}),(0,X.jsx)(_.xu,{color:"secondary",height:S,width:S})]})]})})}),(0,X.jsx)(_.xu,{ref:x,dangerouslySetInlineStyle:{__style:en(v,g,m,x.current,I.current)},position:"absolute",children:(0,X.jsx)(_.Ee,{alt:u._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:a,fit:"cover",naturalHeight:l,naturalWidth:s,src:c})})]}),(0,X.jsx)(_.xu,{marginBottom:8,marginTop:8,paddingX:12,children:(0,X.jsx)(_.X6,{align:"center",size:"500",children:u._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var eo=t(854694),ea=t(708171);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ep(r.key),r)}}function ec(e,n){return(ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function eu(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ed(e){return(ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ef(e,n,t){return(n=ep(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ep(e){var n=function(e,n){if("object"!==el(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==el(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===el(n)?n:String(n)}var eh=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],ey=function(e,n){return Math.random()*((e||1)-(n||0))+(n||0)},em=function(e){return e*(Math.PI/180)},e_=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ec(e,n)}(i,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ed(i);if(n){var r=ed(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===el(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return eu(e)}(this,e)});function i(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,i);for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];return ef(eu(e=r.call.apply(r,[this].concat(t))),"animationTimer",null),ef(eu(e),"canvasRemovalTimer",null),ef(eu(e),"childrenContainerRef",(0,p.createRef)()),ef(eu(e),"containerRef",(0,p.createRef)()),ef(eu(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var n=window.innerWidth,t=e.containerRef.current.getBoundingClientRect(),r=t.height,i=t.top,o=document.createElement("canvas");return o.style.position="absolute",o.style.left="0px",o.style.top="".concat(i-(n-r)/2,"px"),o.style.pointerEvents="none",o.style.width="".concat(n,"px"),o.style.height="".concat(n,"px"),o.width=n,o.height=n,o}),ef(eu(e),"explode",function(){var n=e.buildCanvas();if(n){var t=e.containerRef.current,r=e.childrenContainerRef.current,i=n.getContext("2d");null==t||t.insertBefore(n,r),function e(n,t,r,i){window.requestAnimationFrame(function(){return e(n,t,r,i)}),t.clearRect(0,0,r,i),n.forEach(function(e){e.x+=e.speed*Math.cos(em(e.degree)),e.y+=e.speed*Math.sin(em(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})}(Array.from(Array(120)).map(function(){return{x:n.width/2,y:n.height/2,radius:Math.round(ey(10,30)),color:eh[Math.floor(Math.random()*eh.length)],degree:Number(ey(0,360).toFixed(1)),speed:Math.round(ey(0,25)),friction:.9,opacity:Number(ey(0,.5).toFixed(1)),yVel:0,gravity:.04}}),i,n.width,n.height),e.canvasRemovalTimer=setTimeout(function(){null==t||t.removeChild(n)},(e.props.delay||0)+1e3)}}),e}return es(i.prototype,[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.delay,r=n.startAnimation,i=e.startAnimation;r&&i!==r&&(this.animationTimer=setTimeout(this.explode,t))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,X.jsx)(_.xu,{ref:this.containerRef,children:(0,X.jsx)(_.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}]),t&&es(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(p.PureComponent);function eb(e){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eg(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ev(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eg(Object(t),!0).forEach(function(n){ew(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function eP(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function eS(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eA(r.key),r)}}function ex(e,n){return(ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function eI(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ej(e){return(ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ew(e,n,t){return(n=eA(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function eA(e){var n=function(e,n){if("object"!==eb(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==eb(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===eb(n)?n:String(n)}ef(e_,"defaultProps",{delay:0});var ek=function(e,n,t){var r,i,o=[],a=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if(a&&l){var s={x:l.left-a.left,y:l.top-a.top},c={x:l.width/a.width,y:l.height/a.height};o.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),o.push("scale(".concat(c.x,", ").concat(c.y,")"))}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},eO=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ex(e,n)}(o,e);var n,t,r,i=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ej(o);if(n){var r=ej(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===eb(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return eI(e)}(this,e)});function o(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return ew(eI(e=i.call.apply(i,[this].concat(t))),"state",{startAnimation:!1}),ew(eI(e),"dismissTimer",null),ew(eI(e),"pinRef",(0,p.createRef)()),ew(eI(e),"pinDestinationRef",(0,p.createRef)()),ew(eI(e),"handleAnimationAndCompletion",function(){var n=e.props,t=n.onComplete,r=n.savePin,i=n.selectedBoardName;if(i){var o=e.startAnimation();Promise.all([o,r(i)]).then(function(e){t((function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return eP(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eP(e,n)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],i)}).catch(function(e){o.then(function(){e&&e.onError&&e.onError()})})}}),ew(eI(e),"startAnimation",function(){return new Promise(function(n){e.setState({startAnimation:!0},function(){e.dismissTimer=setTimeout(function(){n()},2600)})})}),e}return t=[{key:"componentWillUnmount",value:function(){this.dismissTimer&&clearTimeout(this.dismissTimer)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedBoardName,n=this.state.startAnimation;e&&!n&&this.handleAnimationAndCompletion()}},{key:"render",value:function(){var e=this,n=this.props,t=n.pinDominantColor,r=n.pinImageUrl,i=n.selectedBoardName,o=this.state.startAnimation;return(0,X.jsxs)(p.Fragment,{children:[(0,X.jsx)(_.Le,{top:O.DEFAULT_HEIGHT,zIndex:new _.Ry(3),children:(0,X.jsx)(_.xu,{alignItems:"center",color:o?"transparent":"default",display:"flex",justifyContent:"center",children:(0,X.jsx)(_.xu,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:ek(o,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,X.jsx)(_.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:t,fit:"cover",naturalHeight:84,naturalWidth:84,src:r})})})}),(0,X.jsx)(_.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:o?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,X.jsxs)(_.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,X.jsx)(e_,{delay:1200,startAnimation:o,children:(0,X.jsx)(_.zd,{rounding:2,width:148,children:(0,X.jsx)(_.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map(function(n,t){var r=t<=1,i=t%2,o=0===t?e.pinDestinationRef:null;return(0,X.jsx)(_.xu,{ref:o,color:0===t?"transparent":"secondary",height:72,marginBottom:r?1:0,marginEnd:i?0:1,width:72},t)})})})}),(0,X.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:{opacity:o?1:0,WebkitTransform:o?"translateY(0)":"translateY(20%)",transform:o?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,X.jsx)(_.X6,{children:(0,A.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:i})})})]})})]})}}],eS(o.prototype,t),r&&eS(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(p.PureComponent),eE=function(e){var n=(0,w.ZP)();return(0,X.jsx)(eO,ev(ev({},e),{},{i18n:n}))},eR=t(222910),eT=t(978536),eB=t(67765),eC=t(949457),eF=t(296011),eL=t(386008),eD=t(125768),eZ=t(13848),ez=t(86967),eN=t(402287),eK=t(410391),eM=t(984869),eH=t(256918);function eU(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eG(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eG(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eG(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eW=void 0!==i?i:i=t(77256);function eV(e){var n=e.createSectionAndRepin,t=e.errorMessage,r=e.i18n,i=e.pin,o=e.setErrorMessage,a=e.useRoundedCorners,l=eU((0,p.useState)(""),2),s=l[0],c=l[1];return(0,X.jsx)(ez.Z,{backButtonIcon:"arrow-back",errorMessage:t,name:s,onNameChange:function(e){o(""),c(e.target.value)},onNextButtonTouch:function(){n(s,r)},selectedPinIds:[i.entityId],useRoundedCorners:a})}function eY(e){var n=e.boardId,t=e.isEditingPin,r=e.onSuccess,i=e.pinKey,o=e.pinBoardId,a=e.pinSectionId,l=e.trackingParams,s=e.useRoundedCorners,c=(0,I.Z)(eW,i),u=(0,h.useDispatch)(),d=(0,m.k6)(),f=(0,w.ZP)(),y=(0,eZ.F9)().showToast,_=(0,b.Z)(),g=(0,eH.M)(),P=(0,z.F)().checkExperiment,S=(0,v.c)(),j=eU((0,p.useState)(""),2),A=j[0],k=j[1],O=function(e){return d.push(e)};return(0,X.jsx)(eV,{createSectionAndRepin:function(e){var i=function(e){return k(e.message_detail||e.message)};u((0,eN.Nv)(n,[],e,_)).then(function(e){y(function(e){var n=e.hideToast;return(0,X.jsx)(x.ZP,{onHide:n,text:f._('Section added!', ' - ', ' -- ')})});var s,p=e.resource_response.data;u((0,eM.w)({checkExperiment:P,i18n:f,logContextEvent:_,pinId:c.entityId,boardId:n,onSuccess:t?void 0:function(){S("Save",{pin_id:c.entityId}),r()},showToast:y,section:p,trackingParams:{clientTrackingParams:l,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:""},historyPush:O,savePinId:null!==(s=null==g?void 0:g.save)&&void 0!==s?s:function(){}})).then(function(){c&&o&&u((0,eK.q)({pinId:c.entityId,boardId:o,boardSectionId:a,clientTrackingParams:l})).then(function(){var e;return c.pinnedToBoard?d.replace(null!==(e=c.pinnedToBoard.url)&&void 0!==e?e:""):void 0})}).catch(i)}).catch(i)},errorMessage:A,i18n:f,pin:c,setErrorMessage:k,useRoundedCorners:s})}var eq=t(160133),eQ=t(216167),eX=t(227258),e$=t(827625),eJ=t(494125),e0=t(785059),e1=t(199677),e2=t(237040),e6=t(358589),e3=t(821419),e7=t(64819),e4=t(430408),e8=t(579240),e9=t(937310),e5=t(951766);function ne(e){var n=e.handleSelected,t=(0,w.ZP)(),r=(0,b.Z)();return(0,eJ.Z)(function(){r({component:7,element:11933,event_type:13,view_type:3})}),(0,X.jsx)(_.iP,{onTap:function(){n(!1,null)},rounding:2,children:(0,X.jsxs)(_.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:2,children:[(0,X.jsx)(_.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:2,width:48,children:(0,X.jsx)(_.JO,{accessibilityLabel:t._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,X.jsx)(_.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,X.jsx)(_.xv,{lineClamp:1,size:"400",weight:"bold",children:t._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var nn=t(308082);function nt(){var e=(0,nn.useRelayEnvironment)();return(0,p.useCallback)(function(n){e&&(0,nn.commitLocalUpdate)(e,function(e){var t;null===(t=e.get(n))||void 0===t||t.invalidateRecord()})},[e])}function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function no(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function na(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?no(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==nr(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nr(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):no(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nl=void 0!==o?o:o=t(245160),ns=function(e,n,t){return na({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function nc(e){var n,t,r=e.boards,i=e.boardsShortlist,o=void 0===i?[]:i,a=e.closeModal,l=e.dismissFlyout,s=e.history,c=e.isEditingPin,u=e.isFromToast,d=e.logContextEvent,f=e.onSelect,y=e.originalPinId,m=e.pinKey,b=e.pinBoardId,g=e.saveToProfileEnabled,P=e.trackingParams,S=(0,w.ZP)(),j=(0,I.Z)(nl,m),A=nt(),k=(0,h.useDispatch)(),O=(0,e6.Z)(),E=(0,eH.M)(),R=(0,v.c)(),T=s.location.state&&s.location.state.isOneTapSave,B=(0,z.F)().checkExperiment,C=g&&B("mweb_top_choices_extract_profile").anyEnabled,F=B("web_top_choices_ordering_and_reduction").anyEnabled,L=B("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||B("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,D=(0,eR.Z)(),Z=D.showRepinConfirmation,N=D.showToast,K=function(e){return s.push(e)},M=o;F||(M=0!==o.length?r.filter(function(e){return o.some(function(n){return e.id===n.id})}):r.slice(0,3));var U=M.map(function(e){return e.id});g&&U.unshift("PROFILE_PINS");var G=(0,e0.Z)(),W=(0,H.Z)(),V=(0,e1.lJ)(W,G),q=(0,e2.Yg)();(0,eJ.Z)(function(){U&&d({event_type:13,component:7,element:1001,view_type:3,aux_data:{pin_id:j.entityId,suggested_boards:U}})});var Q=function(e){var n,t=e.boardId,r=e.i18n,i=e.isQuickSave;return l(),null==q||q("main_pin_repin"),k((0,eM.w)({checkExperiment:B,i18n:r,isQuickSave:i,logContextEvent:d,pinId:j.entityId,boardId:t,onSuccess:function(){R("Save",{pin_id:j.entityId,is_promoted:j.isPromoted}),s.goBack()},originalPinId:y,showRepinConfirmation:Z,trackingParams:P,historyPush:K,suggestedBoardIds:U,savePinId:null!==(n=null==E?void 0:E.save)&&void 0!==n?n:function(){}}))},$=function(e){return k((0,e3.Br)(e))},J=O({fn:(n=regeneratorRuntime.mark(function e(n,t){var r,i,o,l,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&t)){e.next=4;break}f(t),e.next=17;break;case 4:if(e.prev=4,c){e.next=11;break}return r=!(null!=t&&t.id),e.next=9,Q({boardId:null==t?void 0:t.id,i18n:S,isQuickSave:r});case 9:if(i=e.sent,(T||L)&&i){var h;h={boardId:null==t?void 0:t.id,localPinId:i.id,pinId:j.entityId,nodeId:j.__id},k((0,e8.a)(na({},h)))}case 11:c&&(o=b,d=na({board_id:l=null==t?void 0:t.id,id:j.entityId},V?{orbac_subject_id:V}:Object.freeze({})),p=o!==l,eQ.Z.create("PinResource",d).callUpdate().then(function(e){var n,t,r,i;p&&l&&o&&(n={selectedPinIds:[j.entityId],source:{boardId:o,sectionId:void 0},target:{boardId:l,sectionId:void 0}},k((0,e4.S)(n)),$({boardId:l,sectionId:void 0,increment:1}),$({boardId:o,sectionId:void 0,increment:-1}),W.id&&!o&&(t=W.id,r=j.entityId,k((0,e7.EX)({feedId:t,feedType:e9.Z.BOARDLESS_PINS,itemIds:[r],itemType:"pin"})))),k((0,eX.b)("PinResource",{options:d})),i=j.entityId,k((0,e$.jB)("PinResource",ns(i,!0,V))),A(j.__id),k((0,e$.Sr)("PinResource",ns(e.resource_response.data.id,!1,V),e)),s.goBack()}),u&&a()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),N(function(n){var t=n.hideToast;return(0,X.jsx)(x.ZP,{onHide:t,text:e.t0.message||S._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),type:"error"})});case 17:case"end":return e.stop()}},e,null,[[4,14]])}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){ni(o,r,i,a,l,"next",e)}function l(e){ni(o,r,i,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)}),modalHeader:(0,Y.Bx)(S)});return(0,X.jsx)(p.Fragment,{children:(0,X.jsxs)(_.kC,{direction:"column",gap:4,children:[(0,X.jsxs)(_.xu,{children:[g&&C&&(0,X.jsx)(ne,{handleSelected:J}),o.length>0&&(0,X.jsx)(_.xu,{marginBottom:4,marginTop:2,children:(0,X.jsx)(_.xv,{children:S._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),g&&!C&&(0,X.jsx)(ne,{handleSelected:J}),M.map(function(e){return(0,X.jsx)(e5.Z,{boardId:e.id,onBoardSelected:function(n){return J(n,e)},showSingleBoardRep:!0},e.id)})]}),(0,X.jsxs)(_.xu,{children:[(0,X.jsx)(_.xu,{marginBottom:4,children:(0,X.jsx)(_.xv,{children:S._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})}),r.map(function(e){return(0,X.jsx)(e5.Z,{boardId:e.id,onBoardSelected:function(n){return J(n,e)},showSingleBoardRep:!0},e.id)})]})]})})}var nu=t(490166),nd=function(){return(0,X.jsx)(_.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,X.jsxs)(p.Fragment,{children:[(0,X.jsx)(_.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,X.jsx)(_.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})})},nf=t(529081),np=t(112544);function nh(e){return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ny(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function nm(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var n_=void 0!==a?a:a=t(7209),nb=function(e){var n=e.allSuggestions,t=e.handleCreateBoard,r=e.index,i=e.isFBC,o=e.logContextEvent,a=e.pinViewParameter;t(),o({aux_data:{board_title_list:JSON.stringify(n),is_fbc:i.toString(),selected_board_title_index:r},component:7,element:23,event_type:102,view_parameter:a,view_type:3})};function ng(e){var n,t,r,i,o,a=e.isEditingPin,l=e.isFirstBoard,s=e.history,c=e.onFirstBoardCreate,u=e.pinBoardId,d=e.pinKey,f=e.pinSectionId,p=e.titleSuggestions,y=e.clientTrackingParams,m=(0,b.Z)(),g=(0,np.Z)(),v=(0,w.ZP)(),P=(0,e6.Z)(),S=(0,eR.Z)().showRepinConfirmation,x=(0,h.useDispatch)(),j=(0,I.Z)(n_,d),A=j.entityId,k=(0,nf.A)({hasRichMetadata:!!j.richMetadata,hasRichMetadataProducts:!!(null!==(r=j.richMetadata)&&void 0!==r&&r.products),hasRichMetadataArticle:!!(null!==(i=j.richMetadata)&&void 0!==i&&i.article),hasRichMetadataRecipe:!!(null!==(o=j.richMetadata)&&void 0!==o&&o.recipe)}),O=(0,eH.M)(),E=(0,W.Z)(y,j.trackingParams),R=function(e){return s.push(e)},T=(0,z.F)().checkExperiment,B=T("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||T("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,C=function(e){x((0,eK.q)({pinId:A,boardId:u||"",boardSectionId:f,clientTrackingParams:e}))},F=(n=regeneratorRuntime.mark(function e(){var n,t,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(E);case 2:t=null===(n=j.pinnedToBoard)||void 0===n?void 0:n.url,j.section?(i="".concat(null!=t?t:"").concat(null!==(r=j.section.slug)&&void 0!==r?r:"","/"),s.replace(null!=i?i:"")):s.replace(null!=t?t:"");case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){ny(o,r,i,a,l,"next",e)}function l(e){ny(o,r,i,a,l,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)}),L=function(e){g({boardCreateOptions:{name:e,initial_pins:[A],initial_pin_client_tracking_params:[y],privacy:"public"}}).then(function(e){return a?F():s.goBack(),e}).then(function(n){var t=n||{},r=t.url,i=t.id,o=(0,eT.Io)(void 0===r?"":r,e,v),a=o.href,l=o.text,s=(0,eo.Z)({boardId:i,viewType:3}),c=s.duration,u=s.text,d=s.thumbnail;S(function(e){var n=e.hideToast;return(0,X.jsx)(ea.Z,{duration:c,href:a,onHide:n,text:u||l,thumbnail:d})}),m({event_type:5,view_type:3,component:7,view_parameter:k,object_id_str:A,clientTrackingParams:E,aux_data:{board_id:i,destination_board_id:i}})})},D=function(e){g({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[y],privacy:"public"}}).then(function(n){var t,r=n||{},i=r.url,o=void 0===i?"":i,l=r.id;x((0,eM.w)({checkExperiment:T,i18n:v,logContextEvent:m,pinId:A,boardId:l,trackingParams:{clientTrackingParams:E,pinnedToBoardId:l},historyPush:R,savePinId:null!==(t=null==O?void 0:O.save)&&void 0!==t?t:function(){}})).then(function(n){t={boardId:l,localPinId:n.id,pinId:A,nodeId:j.__id},x((0,e8.a)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nm(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==nh(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nh(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nh(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nm(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},t))),a?F():s.goBack();var t,r=(0,eT.Io)(o,e,v),i=r.href,c=r.text,u=(0,eo.Z)({boardId:l,viewType:3}),d=u.duration,f=u.text,p=u.thumbnail;S(function(e){var n=e.hideToast;return(0,X.jsx)(ea.Z,{duration:d,href:i,onHide:n,text:f||c,thumbnail:p})}),m({event_type:5,view_type:3,component:7,view_parameter:k,object_id_str:A,clientTrackingParams:E,aux_data:{board_id:l,destination_board_id:l}})})})},Z=P({fn:function(e,n,t){nb({allSuggestions:t,handleCreateBoard:function(){l?c(n):B?D(n):L(n)},index:e,isFBC:l,logContextEvent:m,pinViewParameter:k})},modalHeader:(0,Y.Bb)(v)});return p?p.map(function(e,n,t){return(0,X.jsx)(_.xu,{children:(0,X.jsx)(nu.Z,{onTouch:function(){return Z(n,e,t)},pressState:"none",rounding:2,children:(0,X.jsxs)(_.xu,{alignItems:"center",display:"flex",paddingY:2,rounding:2,children:[(0,X.jsx)(nd,{}),(0,X.jsx)(_.xu,{column:10,marginStart:3,children:(0,X.jsx)(_.X6,{size:"400",children:e})})]})},n)},n)}):null}var nv=void 0!==l?l:l=t(733935),nP=function(e){var n,t,r,i=(0,y.useLazyLoadQuery)(nv,{pinId:e}).v3GetPinQuery;if(null==i?void 0:null===(n=i.error)||void 0===n?void 0:n.message)throw null==i?void 0:i.error;return(null==i?void 0:null===(t=i.data)||void 0===t?void 0:null===(r=t.boardTitleSuggestions)||void 0===r?void 0:r.map(function(e){return e.title}).filter(Boolean))||[]},nS=void 0!==s?s:s=t(43607);function nx(e){var n=e.allBoards,t=e.saveToProfileEnabled,r=e.boardsShortlist,i=e.closeModal,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFromToast,c=e.onSelect,u=e.originalPinId,d=e.pin,f=e.pinBoardId,h=e.pinSectionId,y=e.trackingParams,m=(0,b.Z)();return(0,X.jsx)(p.Fragment,{children:(0,X.jsx)(nc,{boards:n,boardsShortlist:r,closeModal:i,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:s,logContextEvent:m,onSelect:c,originalPinId:u,pinBoardId:f,pinKey:d,pinSectionId:h,saveToProfileEnabled:t,trackingParams:y})})}function nI(e){var n=e.allBoards,t=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFirstRepinExperience,c=e.isFromToast,u=e.onFirstBoardCreate,d=e.originalPinId,f=e.onSelect,p=e.pin,h=e.pinBoardId,y=e.pinSectionId,m=e.trackingParams,g=e.titleSuggestions,v=(0,w.ZP)(),P=s||0===n.length&&!i,S=(0,b.Z)(),x=function(){return(0,X.jsx)(ng,{clientTrackingParams:m.clientTrackingParams,history:a,isEditingPin:l,isFirstBoard:P,onFirstBoardCreate:u,pinBoardId:h,pinKey:p,pinSectionId:y,titleSuggestions:g})};return P?(0,X.jsxs)(_.xu,{paddingX:1,children:[(0,X.jsx)(_.xu,{marginBottom:4,children:(0,X.jsx)(_.xv,{children:v._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),x()]}):(0,X.jsxs)(_.xu,{marginBottom:4,children:[(0,X.jsx)(nc,{boards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:c,logContextEvent:S,onSelect:f,originalPinId:d,pinBoardId:h,pinKey:p,pinSectionId:y,saveToProfileEnabled:i,trackingParams:m}),g?(0,X.jsxs)(_.xu,{children:[(0,X.jsx)(_.xu,{paddingY:1,children:(0,X.jsx)(eq.Z,{children:(0,X.jsx)(_.iz,{})})}),(0,X.jsx)(_.xu,{paddingY:4,children:(0,X.jsx)(_.xv,{children:v._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),x()]}):(0,X.jsx)(_.xu,{paddingY:6,children:(0,X.jsx)(_.$j,{accessibilityLabel:v._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function nj(e){var n=e.allBoards,t=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,l=e.isEditingPin,s=e.isFetchingBoards,c=e.isFirstRepinExperience,u=e.isFromToast,d=e.onFirstBoardCreate,f=e.onSelect,p=e.originalPinId,h=e.location,y=e.pinKey,m=e.pinBoardId,b=e.pinDescription,g=e.pinSectionId,v=(0,I.Z)(nS,y),P=nP(v.entityId),S=(0,w.ZP)(),x={clientTrackingParams:h.state?h.state.trackingParams:"",pinnedToBoardId:v.pinnedToBoard?v.pinnedToBoard.entityId:""};return n.length>0||!s?n.length>=10?(0,X.jsx)(nx,{allBoards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFromToast:u,onSelect:f,originalPinId:p,pin:v,pinBoardId:m,pinDescription:b,pinSectionId:g,saveToProfileEnabled:i,trackingParams:x}):(0,X.jsx)(nI,{allBoards:n,boardsShortlist:t,closeModal:r,dismissFlyout:o,history:a,isEditingPin:l,isFirstRepinExperience:c,isFromToast:u,onFirstBoardCreate:d,onSelect:f,originalPinId:p,pin:v,pinBoardId:m,pinDescription:b,pinSectionId:g,saveToProfileEnabled:i,titleSuggestions:P,trackingParams:x}):(0,X.jsx)(_.xu,{paddingY:2,children:(0,X.jsx)(_.$j,{accessibilityLabel:S._('Loading repin page content', ' - ', ' -- '),show:!0})})}var nw=t(340370),nA=void 0!==c?c:c=t(709140);function nk(e){var n=e.isEditingPin,t=e.isFirstBoardCreateActive,r=e.pinKey,i=e.pinBoardId,o=e.pinDescription,a=e.pinSectionId,l=e.trackingParams,s=e.onTouch,c=e.useIconWithBackground,u=(0,w.ZP)(),d=(0,I.Z)(nA,r),f=(0,nw.Z)({href:{pathname:"/board/create/".concat(d.entityId,"/"),state:{isFirstBoardCreateActive:t,pinnedToBoardId:d.pinnedToBoard?d.pinnedToBoard.entityId:"",pinDescription:o,trackingParams:l,isEditingPin:n,pinBoardId:i,pinSectionId:a}}});return(0,X.jsx)(O.FixedFooter,{hasTopShadow:c,height:c?void 0:70,children:(0,X.jsx)(_.iP,{onTap:function(e){var n=e.event;null==s||s(),f({event:n})},children:(0,X.jsxs)(_.xu,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:c?1:0,paddingY:c?0:1,children:[c?(0,X.jsx)(_.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,X.jsx)(_.JO,{accessibilityLabel:u._('Create board button', ' - ', ' -- '),color:"default",icon:"add",size:20})}):(0,X.jsx)(_.JO,{accessibilityLabel:u._('Create board button', ' - ', ' -- '),color:"error",icon:"add-circle",size:38}),(0,X.jsx)(_.xu,{marginStart:c?2:3,children:(0,X.jsx)(_.xv,{weight:"bold",children:u._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var nO=t(900876);function nE(e){return(nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nR(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(r,i)}function nT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nB(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nT(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==nE(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nE(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nC=void 0!==u?u:u=t(35934),nF=function(e,n,t){return nB({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function nL(e){var n,t,r,i,o=e.boardId,a=e.history,l=e.location.search,s=e.showSectionRep,c=e.pinKey,u=e.onSuccess,d=e.trackingParams,f=e.dismissFlyout,p=(0,h.useDispatch)(),y=(0,w.ZP)(),m=(0,I.Z)(nC,c),_=nt(),g=(0,eZ.F9)().showToast,P=new URLSearchParams(l),S=P.get("isEditingPin"),x=null!==(r=P.get("pinBoardId"))&&void 0!==r?r:"",j=null!==(i=P.get("pinSectionId"))&&void 0!==i?i:"",A=(0,W.Z)(d,m.trackingParams),k=(0,b.Z)(),O=(0,eH.M)(),E=(0,z.F)().checkExperiment,R=function(e){return a.push(e)},T=(0,e0.Z)(),B=(0,H.Z)(),C=(0,e1.lJ)(B,T),F=(0,v.c)(),L=function(e){var n;f(),p((0,eM.w)({checkExperiment:E,i18n:y,logContextEvent:k,pinId:m.entityId,boardId:o,onSuccess:S?void 0:function(){F("Save",{pin_id:m.entityId,is_promoted:m.isPromoted}),u()},showToast:g,section:e,trackingParams:{clientTrackingParams:A,pinnedToBoardId:m.pinnedToBoard?m.pinnedToBoard.entityId:""},historyPush:R,savePinId:null!==(n=null==O?void 0:O.save)&&void 0!==n?n:function(){}})).then(function(){if(e){var n;p((0,eN.A4)(null!==(n=e.id)&&void 0!==n?n:""))}})},D=function(e){return p((0,e3.Br)(e))},Z=(n=regeneratorRuntime.mark(function e(n,t){var r,i,o,l,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=3;break}return e.next=3,L(t);case 3:S&&(r=x,i=n,o=j,s=nB({board_id:i,board_section_id:l=null==t?void 0:t.id,id:m.entityId},C?{orbac_subject_id:C}:Object.freeze({})),c=r!==i,u=o!==l,eQ.Z.create("PinResource",s).callUpdate().then(function(e){var n,t,d,f;(c||u)&&(n={selectedPinIds:[m.entityId],source:{boardId:r,sectionId:o||null},target:{boardId:i,sectionId:l}},p((0,e4.S)(n)),D({boardId:i,sectionId:l,increment:1}),D({boardId:r,sectionId:o,increment:-1}),B.id&&!r&&(t=B.id,d=m.entityId,p((0,e7.EX)({feedId:t,feedType:e9.Z.BOARDLESS_PINS,itemIds:[d],itemType:"pin"})))),p((0,eX.b)("PinResource",{options:s})),f=m.entityId,p((0,e$.jB)("PinResource",nF(f,!0,C))),_(m.__id),p((0,e$.Sr)("PinResource",nF(e.resource_response.data.id,!1,C),e)),a.go(-2)}));case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){nR(o,r,i,a,l,"next",e)}function l(e){nR(o,r,i,a,l,"throw",e)}a(void 0)})},function(e,n){return t.apply(this,arguments)});return(0,X.jsx)(nO.Z,{boardId:o,repin:Z,showSectionRep:s})}function nD(e){return(nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nZ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nz(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nZ(Object(t),!0).forEach(function(n){nU(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nZ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function nN(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nG(r.key),r)}}function nK(e,n){return(nK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function nM(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nH(e){return(nH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nU(e,n,t){return(n=nG(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function nG(e){var n=function(e,n){if("object"!==nD(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==nD(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===nD(n)?n:String(n)}var nW=void 0!==d?d:d=t(870893),nV=void 0!==f?f:f=t(560173);function nY(e){var n=e.children,t=(0,h.useSelector)(function(e){var n=e.session;return 72+((0,k.Rq)(n.userAgentPlatform)?k.Vf:0)});return(0,X.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:n})}var nq=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&nK(e,n)}(o,e);var n,t,r,i=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nH(o);if(n){var r=nH(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,n){if(n&&("object"===nD(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return nM(e)}(this,e)});function o(){var e;!function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return nU(nM(e=i.call.apply(i,[this].concat(t))),"state",{dupeWarningDismissed:!1,pinDescription:(e.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(e.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0}),nU(nM(e),"saved",function(){return e.setState({saved:!0})}),nU(nM(e),"onResize",function(){e.setState({windowInnerHeight:window.innerHeight})}),nU(nM(e),"handleBackButtonTouch",function(){var n=e.props;(0,n.logContextEvent)({view_type:21,view_parameter:87,component:7,element:n.match.params.boardId?34:75,event_type:102})}),nU(nM(e),"handleDismissWarningFlyout",function(){return e.setState({dupeWarningDismissed:!0})}),nU(nM(e),"handleFirstBoardCreateOnSuccess",function(n,t){var r=e.props,i=r.closeupExperience,o=r.completeExperience,a=r.history,l=r.i18n,s=r.repinExperience,c=r.showRepinConfirmation,u=r.mountAfterActionPlacement,d=n.boardId,f=n.boardUrl,p=(0,eT.Io)(f,t,l),h=p.href,y=p.text,m=(0,eo.Z)({boardId:d,isFBC:!0,viewType:21}),_=m.duration,b=m.text,g=m.thumbnail;a.goBack(),c(function(e){var n=e.hideToast;return(0,X.jsx)(ea.Z,{duration:_,href:h,onHide:n,text:b||y,thumbnail:g})}),i&&i.placement_id&&503459===i.experience_id&&o(i.placement_id,i.experience_id),s&&V(s,501032)&&o(s.placement_id,s.experience_id),u("Save",{pin_id:e.props.pin.entityId,is_promoted:e.props.pin.isPromoted})}),nU(nM(e),"handleSetSelectedBoard",function(n){var t,r=e.props,i=r.history,o=r.pin,a=r.location,l=e.state.trackingParams;e.isFirstBoardCreateActive()||i.push("/board/create/".concat(o.entityId,"/").concat(n,"/"),{trackingParams:l,from:null===(t=a.state)||void 0===t?void 0:t.from}),e.setState({suggestedBoardName:n})}),nU(nM(e),"handleFirstBoardCreate",function(n){var t=e.props,r=t.createBoard,i=t.history,o=t.location,a=t.logContextEvent,l=t.match,s=t.pin,c=t.showToast,u=e.state.trackingParams,d=l.params.id;return r({boardCreateOptions:{initial_pins:d?[d]:[],name:n,initial_pin_client_tracking_params:[(0,W.Z)((o.state||{}).trackingParams)],privacy:"public"},deprecatedSchemaForNormalization:eC.IY}).then(function(e){var n,t,r,i=e.id;a({event_type:5,view_type:3,component:7,view_parameter:(0,nf.A)({hasRichMetadata:!!s.richMetadata,hasRichMetadataProducts:!!(null!==(n=s.richMetadata)&&void 0!==n&&n.products),hasRichMetadataArticle:!!(null!==(t=s.richMetadata)&&void 0!==t&&t.article),hasRichMetadataRecipe:!!(null!==(r=s.richMetadata)&&void 0!==r&&r.recipe)}),object_id_str:s.entityId,clientTrackingParams:(0,W.Z)(u,s.trackingParams),aux_data:{board_id:i,destination_board_id:i}});var o=e.url;return{boardId:i,boardUrl:void 0===o?"":o}},function(n){throw{onError:function(){i.goBack(),c(function(t){var r=t.hideToast;return(0,X.jsx)(x.ZP,{onHide:r,text:n.message||e.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board'),type:"error"})})}}})}),nU(nM(e),"handleSelectBoard",function(n){var t,r,i,o,a=e.props,l=a.history,s=a.pin,c=a.location,u=c.search,d=e.state.trackingParams,f=new URLSearchParams(u),p=!!f.get("isEditingPin"),h=null!==(t=f.get("pinBoardId"))&&void 0!==t?t:"",y=null!==(r=f.get("pinSectionId"))&&void 0!==r?r:"";p?l.push("/pin/".concat(s.entityId,"/repin/").concat(n.id,"/?isEditingPin=true&pinBoardId=").concat(h,"&pinSectionId=").concat(y),{trackingParams:d,from:null===(i=c.state)||void 0===i?void 0:i.from}):l.push({pathname:"/pin/".concat(s.entityId,"/repin/").concat(n.id,"/")},{trackingParams:d,from:null===(o=c.state)||void 0===o?void 0:o.from})}),nU(nM(e),"handleClickAddSectionButton",function(){var n,t,r,i,o=e.props,a=o.pin,l=o.history,s=o.match.params.boardId,c=o.location;if(s){var u=c.search,d=new URLSearchParams(u),f=!!d.get("isEditingPin"),p=null!==(n=d.get("pinBoardId"))&&void 0!==n?n:"",h=null!==(t=d.get("pinSectionId"))&&void 0!==t?t:"";f?l.push("/pin/".concat(a.entityId,"/repin/").concat(s,"/add/?isEditingPin=true&pinBoardId=").concat(p,"&pinSectionId=").concat(h),{from:null===(r=c.state)||void 0===r?void 0:r.from}):l.push({pathname:"/pin/".concat(a.entityId,"/repin/").concat(s,"/add/"),state:{from:null===(i=c.state)||void 0===i?void 0:i.from}})}}),nU(nM(e),"handleRepinToExistingSectionSuccess",function(){return e.props.history.go(-2)}),nU(nM(e),"handleRepinToNewSectionSuccess",function(){return e.props.history.go(-3)}),nU(nM(e),"handleRepinCreateBoardButtonTouch",function(){e.props.logContextEvent({view_type:21,view_parameter:87,component:7,element:249,event_type:102})}),nU(nM(e),"renderCreateScreen",function(){var n,t,r=e.props,i=r.pin,o=r.location.search,a=r.match.params.boardId,l=e.state.trackingParams,s=new URLSearchParams(o),c=!!s.get("isEditingPin"),u=null!==(n=s.get("pinBoardId"))&&void 0!==n?n:"",d=null!==(t=s.get("pinSectionId"))&&void 0!==t?t:"";return!!a&&(0,X.jsx)(eY,{boardId:a,isEditingPin:c,onSuccess:e.handleRepinToNewSectionSuccess,pinBoardId:u,pinKey:i,pinSectionId:d,trackingParams:l,useRoundedCorners:!0})}),nU(nM(e),"isFirstBoardCreateActive",function(){var n=e.props,t=n.allBoards,r=n.isFetchingBoards,i=n.saveToProfileEnabled;return!!V(n.repinExperience,501032)||!r&&0===t.length&&!i}),nU(nM(e),"isBoardCreateEduActive",function(){return V(e.props.repinExperience,501021)}),nU(nM(e),"completeBoardCreateEduExperience",function(){var n=e.props,t=n.completeExperience,r=n.repinExperience;r&&e.isBoardCreateEduActive()&&t(r.placement_id,r.experience_id)}),nU(nM(e),"renderPicker",function(){var n,t,r,i,o,a=e.props,l=a.allBoards,s=a.saveToProfileEnabled,c=a.boardsShortlist,u=a.history,d=a.isFetchingBoards,f=a.location,p=a.pin,h=a.match.params.boardId,y=a.location.search,m=e.state,b=m.pinDescription,g=m.dupeWarningDismissed,v=m.saved,P=m.suggestedBoardName,S=m.trackingParams,x=m.warningAnchor,I=b.trim(),j=p.pinnedToBoard,w=j?(0,A.nk)(e.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:j.name}).join(" "):null,k=p.dominantColor,R=p.imageSpec_236x,T=R?R.url:"",B=new URLSearchParams(y),C=!!B.get("isEditingPin"),F=null!==(n=B.get("pinBoardId"))&&void 0!==n?n:"",L=null!==(t=B.get("pinSectionId"))&&void 0!==t?t:"",D=!!B.get("isFromToast"),Z=null!==(r=B.get("originalPinId"))&&void 0!==r?r:"",z=e.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),N=new _.Ry(2),K=e.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),M=e.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),H=h?z:0!==l.length||d||s?M:K;return(0,X.jsxs)(E.default,{hasFixedHeader:!0,children:[(0,X.jsx)(G.Z,{text:H}),(0,X.jsx)(O.FixedHeader,{useRoundedCorners:!0,zIndex:N,children:(0,X.jsxs)(_.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,X.jsx)(_.xu,{column:2,children:(0,X.jsx)(eD.Z,{alignIconLeft:!0,color:"darkGray",icon:h?"arrow-back":"cancel",onTouch:e.handleBackButtonTouch,size:"sm"})}),(0,X.jsx)(_.xu,{column:8,children:(0,X.jsx)(_.xu,{"data-test-id":"repin-page-title",children:(0,X.jsx)(_.xv,{align:"center",weight:"bold",children:H})})}),(0,X.jsx)(_.xu,{column:2})]})}),p.imageSpec_236x&&(e.isFirstBoardCreateActive()?(0,X.jsx)(eE,{onComplete:e.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=k?k:"",pinImageUrl:null!=T?T:"",savePin:e.handleFirstBoardCreate,selectedBoardName:P}):null),(0,X.jsx)(nY,{children:h?(0,X.jsx)(nL,{boardId:h,dismissFlyout:e.saved,history:u,location:f,onSuccess:e.handleRepinToExistingSectionSuccess,pinKey:p,showSectionRep:!0,trackingParams:S}):(0,X.jsx)(nj,{allBoards:l,boardsShortlist:c,closeModal:e.handleBackButtonTouch,dismissFlyout:e.saved,history:u,isEditingPin:C,isFetchingBoards:d,isFirstRepinExperience:e.isFirstBoardCreateActive(),isFromToast:D,location:f,onFirstBoardCreate:e.handleSetSelectedBoard,onSelect:e.handleSelectBoard,originalPinId:Z,pinBoardId:F,pinDescription:I,pinKey:p,pinSectionId:L,saveToProfileEnabled:s})}),h?(0,X.jsx)(U.Wx,{onAddNewSection:e.handleClickAddSectionButton,useIconWithBackground:!0}):(0,X.jsx)(q.Z,{modalHeader:(0,Y.Bb)(e.props.i18n),nextLocation:"/board/create/".concat(p.entityId,"/"),children:(0,X.jsx)(nk,{isEditingPin:C,isFirstBoardCreateActive:e.isFirstBoardCreateActive(),onTouch:e.handleRepinCreateBoardButtonTouch,pinBoardId:F,pinDescription:I,pinKey:p,pinSectionId:L,trackingParams:S,useIconWithBackground:!0})}),R&&e.isBoardCreateEduActive()&&(0,X.jsx)(ei,{completeExperience:e.completeBoardCreateEduExperience,pinDominantColor:null!=k?k:"",pinImageHeight:null!==(i=R.height)&&void 0!==i?i:1,pinImageUrl:null!=T?T:"",pinImageWidth:null!==(o=R.width)&&void 0!==o?o:1}),x&&!v&&p.pinnedToBoard&&!g&&w&&(0,X.jsx)(_.J2,{anchor:x,idealDirection:"down",onDismiss:e.handleDismissWarningFlyout,shouldFocus:!1,children:(0,X.jsx)(_.xu,{padding:3,children:(0,X.jsx)(_.xv,{weight:"bold",children:(0,X.jsx)("span",{children:w})})})})]})}),e}return t=[{key:"componentDidMount",value:function(){var e=this.props,n=e.repinExperience,t=e.triggerExperimentsForPlacement,r=e.viewExperience;t(1000153),n&&r(1000153,n.experience_id),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return(0,X.jsx)(P.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),closeOnOutsideClick:!1,isOpen:!0,onDismiss:function(){},type:"repinPage",children:(0,X.jsx)(_.xu,{height:this.state.windowInnerHeight-S.i_,paddingX:2,paddingY:0,children:(0,X.jsxs)(m.rs,{children:[(0,X.jsx)(m.AW,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,X.jsx)(m.AW,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,X.jsx)(m.AW,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}],nN(o.prototype,t),r&&nN(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(p.PureComponent),nQ=function(e,n){var t="PinResource",r={field_set_key:"repin"},i=(0,j.Z)({strategy:n?"GRAPHQL":"LEGACY",query:nV,variables:{pinId:e},options:{fetchPolicy:"store-or-network"},transformGraphQL:function(e){var n;return(null===(n=e.v3GetPinQuery)||void 0===n?void 0:n.__typename)==="V3GetPin"?e.v3GetPinQuery.data:null},useGetLegacyData:function(e){var n=e.pinId;return(0,K.Z)({name:t,options:nz(nz({},r),{},{id:n})}).data}}),o=(0,I.Z)(nW,i);return Z(o,{name:t,options:nz(nz({},r),{},{id:e})}),o},nX=function(e){var n=(0,h.useSelector)(function(e){return e.session.userId}),t=(0,(0,z.F)().checkExperiment)("web_top_choices_ordering_and_reduction").anyEnabled,r=(0,K.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:t?2:null,shortlist_suggestions:3,user_id:n}}),i=r.isFetching,o=r.data,a=(null==o?void 0:o.all_boards)||[];return{isFetching:i,allBoards:(0,h.useSelector)(function(e){return(0,eF.Z)(nz(nz({},e),{},{boards:a}))||[]}),boardsShortlist:(null==o?void 0:o.boards_shortlist)||[]}};function n$(e){var n,t=e.shouldFetchPinFromGraphQL,r=(0,m.k6)(),i=(0,m.TH)(),o=(0,m.$B)(),a=null!==(n=o.params.id)&&void 0!==n?n:"",l=(0,w.ZP)(),s=(0,b.Z)(),c=(0,g.be)(),u=(0,g.Ig)(),d=(0,np.Z)(),f=(0,eL.Tt)(),p=(0,H.Z)().isAuth,y=(0,M.HG)(),_=nQ(a,t),P=nX(a),S=P.isFetching,x=P.allBoards,I=P.boardsShortlist;(0,N.Z)({name:"UserResource",options:{user_id:null==f?void 0:f.id,field_set_key:"quicksave"}});var j=(0,h.useDispatch)(),A=(0,h.useSelector)(function(e){return e.experiences}),k=(0,v.c)(),O=(0,eR.Z)(),E=O.showToast,R=O.showRepinConfirmation,T=(0,eB.ZP)((null==f?void 0:f.id)||"").showEnabledSaveBehavior;return!p||y?(0,X.jsx)(m.l_,{to:"/pin/".concat(a,"/")}):_?(0,X.jsx)(nq,{allBoards:x,boardsShortlist:I,closeupExperience:A[1000112],completeExperience:function(e,n){return j(c(e,n))},createBoard:d,history:r,i18n:l,isFetchingBoards:S,location:i,logContextEvent:s,match:o,mountAfterActionPlacement:k,pin:_,repinExperience:A[1000153],saveToProfileEnabled:T,showRepinConfirmation:R,showToast:E,triggerExperimentsForPlacement:function(e){return j((0,g.kd)(e))},viewExperience:function(e,n){return j(u(e,n))}}):null}},67765:function(e,n,t){t.d(n,{ZP:function(){return s},tY:function(){return d},Xt:function(){return c},$7:function(){return f},Yh:function(){return u}});var r=t(780277),i=t(340523),o=t(757640),a=t(149722),l={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function s(e){var n,t,r=(0,a.Z)(),l=r.isAuth&&r.id===e,s=(0,i.F)().checkExperiment,c=(0,o.Z)(!r.isAuth||l?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:l&&r.has_quicksave_board||!!(r.isAuth&&null!==(n=(null!=c?c:{}).data)&&void 0!==n&&n.has_quicksave_board)||(l||r.isAuth)&&!r.has_quicksave_board&&!(null!==(t=(null!=c?c:{}).data)&&void 0!==t&&t.has_quicksave_board)&&s("profile_saves_for_all").anyEnabled}}function c(e){var n,t=(0,a.Z)(),r=t.isAuth&&t.id===e,i=(0,o.Z)(!t.isAuth||r?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:r&&t.has_quicksave_board||!!(t.isAuth&&null!==(n=(null!=i?i:{}).data)&&void 0!==n&&n.has_quicksave_board)}}function u(e){var n,t=(0,r.useDispatch)(),i=(0,a.Z)(),l=i.isAuth&&!!i.boardCount&&i.boardCount<5&&e,s=(0,o.Z)(l&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:i.isAuth&&i.id}}:null);return i.isAuth&&void 0===i.save_behavior&&s&&null!==(n=s.data)&&void 0!==n&&n.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:s.data.save_behavior}}),{showEnabledSaveBehavior:l}}function d(e){var n,t=(0,a.Z)();return e&&(t.save_behavior===l.SAVE_TO_PROFILE?n={type:"classic"}:t.save_behavior===l.SHOW_BOARD_PICKER&&(n={type:"inline"})),{saveBehaviorType:n}}function f(){var e,n=(0,a.Z)();return n.isAuth&&(null!==(e=null==n?void 0:n.secretBoardCount)&&void 0!==e?e:0)>0}},402287:function(e,n,t){t.d(n,{$n:function(){return S},A4:function(){return w},CE:function(){return _},ET:function(){return R},F$:function(){return P},Kw:function(){return O},Nv:function(){return k},PA:function(){return j},X_:function(){return E},d9:function(){return x},e1:function(){return m},o4:function(){return A},vB:function(){return g}});var r=t(654369),i=t(216167),o=t(107366),a=t(227258),l=t(827625),s=t(821419),c=t(64819),u=t(430408),d=t(539426),f=t(937310);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!==p(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===p(n)?n:String(n)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function m(e){return function(n){var t=e.boardId,r=e.sectionIdBefore,i=e.sectionIdAfter,a=e.sourceSectionId,l=e.targetSectionId;n((0,c._f)({feedType:f.Z.BOARD_SECTIONS,feedId:t,itemType:"boardsection",sourceItemId:a,targetItemId:l}));var s=Object.freeze({});return r&&(s=y(y({},s),{},{section_before:r})),i&&(s=y(y({},s),{},{section_after:i})),(0,o.Z)({url:"/v3/board/sections/".concat(a,"/reorder/"),method:"POST",data:s})}}function _(e,n){return function(t){return t((0,a.U)("BoardSectionResource",{options:{field_set_key:n||"board_page",section_id:e}}))}}function b(e,n){return{type:"SECTION_ADDED",payload:{boardId:e,section:n}}}function g(e,n,t,r){var o=e.boardId,a=e.sourceBoardId,d=void 0===a?"":a,p=e.sourceSectionId,h=void 0===p?"":p,m=e.name,_=e.nameSource,g=e.pinImport,v=e.initialPinIds,P=0;"RECOMMENDATION"===_?P=1:"EDITED_RECOMMENDATION"===_&&(P=2);var S=y({board_id:o,initial_pins:g&&!g.all?g.pinIds:void 0===v?[]:v,name:m,name_source:P},t?{orbac_subject_id:t}:Object.freeze({}));return function(e){return i.Z.create("BoardSectionResource",S).callCreate({showError:!1}).then(function(i){var a=i.resource_response.data;r({event_type:7100,object_id_str:a.id}),e(b(o,a)),e((0,c.vX)({feedId:o,feedType:f.Z.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),e((0,s.Tq)(o,"pin_count")),e((0,l.jB)("BoardSectionsRepinResource",{board_id:o,orbac_subject_id:t}));var p=g||{all:!1,pinIds:[]},y=p.all,m=p.pinIds;return y?new Promise(function(t,r){return e((0,u.Z)({inverseSelection:!0,selectedPinIds:m,source:{boardId:d||o,sectionId:h||null},target:{boardId:o,sectionId:a.id}},n)).then(function(){return t(a)}).catch(r)}):(m.length>0&&e((0,c.N8)(f.Z.BOARDFEED,o)),a)})}}function v(e,n){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:n}}}function P(e,n,t){return function(r){return i.Z.create("BoardSectionEditResource",y({section_id:n},t?{orbac_subject_id:t}:Object.freeze({}))).callDelete({showError:!1}).then(function(){return Promise.all([r(v(e,n)),r((0,c.EX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[n],itemType:"boardsection"})),r((0,s.Tq)(e,"pin_count")),r((0,l.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:t}))])})}}function S(e,n,t,r){return function(o){return i.Z.create("BoardSectionEditResource",y({section_id:n,title:t},r?{orbac_subject_id:r}:Object.freeze({}))).callCreate({showError:!1}).then(function(n){var t=n.resource_response.data;return o(function(n){var r,i,o,a,l,u=t.board;u&&u.id!==e?(n(v(e,null!==(r=t.id)&&void 0!==r?r:"")),n((0,c.EX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[null!==(i=t.id)&&void 0!==i?i:""],itemType:"boardsection"})),n((0,s.Tq)(e,"pin_count")),n(b(null!==(o=u.id)&&void 0!==o?o:"",t)),n((0,c.vX)({feedId:null!==(a=u.id)&&void 0!==a?a:"",feedType:f.Z.BOARD_SECTIONS,itemIds:[null!==(l=t.id)&&void 0!==l?l:""],itemType:"boardsection"})),n((0,s.Tq)(e,"pin_count"))):n({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}),o((0,l.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:r})),t})}}function x(e,n,t){return function(r){return(0,o.Z)({url:"/v3/board/sections/".concat(n,"/merge/").concat(t,"/"),method:"POST",data:{fields:["boardsection.id","boardsection.board()","board.id","board.blocking_actions"]}}).then(function(i){return Promise.all([r(v(e,n)),r((0,l.jB)("BoardSectionsRepinResource",{board_id:e})),r(_(t)),r((0,c.N8)(f.Z.BOARD_SECTION_PINS,t))]).then(function(){return i})})}}var I=function(e,n){return{type:"BOARD_SECTION_EDIT",payload:n}},j=function(e,n){return function(t){return i.Z.create("BoardSectionEditResource",y(y({},n),{},{section_id:e})).callCreate().then(function(r){return t(I(e,n)),r.resource_response.data})}},w=function(e){return function(n){return i.Z.create("BoardSectionResource",{section_id:e}).callGet().then(function(t){return n(I(e,t.resource_response.data||{id:"",title:""})),t})}},A=function(e,n,t,r){return function(o){var a=i.Z.create("BoardSectionEditResource",{section_id:n}).callDelete();return o({type:"BOARD_SECTION_DELETE",payload:{userId:e,boardSectionId:n,boardId:t,pinCount:r}}),a}},k=function(e,n,t,o){return function(a){var s={board_id:e,initial_pins:n,name:t},u="BoardSectionResource";return i.Z.create(u,s).callCreate().then(function(t){var i=t.resource_response.data,p=(0,r.Fv)(i,d.Z[u]);return o({event_type:7100,object_id_str:i.id}),a((0,l.XM)(u,s,t,p)),a(b(e,i)),a((0,c.vX)({feedId:e,feedType:f.Z.BOARD_SECTIONS,itemIds:[i.id],itemType:"boardsection"})),n.length&&a({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:i.id},pinIds:n}}),t})}},O=function(e){return function(n){var t=e.source,o=e.target,a=e.pinIds;if(n({type:"PINS_MOVE",payload:e}),t.boardlessPins||o.boardId!==t.boardId){var s={board_id:o.boardId,pin_ids:a,section_id:o.sectionId};return i.Z.create("BulkEditResource",s).callUpdate()}if(o.sectionId){var c={section_id:o.sectionId,pins:a},u="BoardSectionEditResource";return i.Z.create(u,c).callUpdate().then(function(e){var t=(0,r.Fv)(e.resource_response.data,d.Z[u]);return n((0,l.XM)(u,c,e,t)),e})}var f={section_id:t.sectionId,pins:a};return i.Z.create("BoardSectionPinsResource",f).callDelete()}},E=function(e){return function(n){n({type:"PINS_MOVE_ALL",payload:e});var t=e.source,r=e.target,o=e.excludePinIds,a={board_id:t.boardId,new_board_id:r.boardId,pin_ids:o,old_section_id:t.sectionId,new_section_id:r.sectionId};return i.Z.create("BulkEditSelectAllResource",a).callUpdate()}},R=function(e,n,t,r,i){return function(o){return o(k(e,[],n,i)).then(function(n){return o(E({source:{boardId:e,sectionId:r},target:{boardId:e,sectionId:n.resource_response.data.id},excludePinIds:t}))})}}},430408:function(e,n,t){t.d(n,{Z:function(){return p},S:function(){return f}});var r=t(216167),i=t(821419),o=t(402287),a=t(64819),l=t(937310),s=t(622888),c=function(e){return function(n){s.Z.showError(function(e,n){switch(e.api_error_code){case 2171:case 2172:case 2173:return n._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(n,e))}},u=function(e){return(0,a.N8)(e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,e.sectionId||e.boardId)};function d(e,n){var t=e.source,r=e.target;r.boardId!==t.boardId?(n((0,i.Tq)(t.boardId,"pin_count")),n((0,i.Tq)(r.boardId,"pin_count"))):t.sectionId&&r.sectionId||n((0,i.Tq)(r.boardId,"pin_count")),t.sectionId&&n((0,o.CE)(t.sectionId)),r.sectionId&&n((0,o.CE)(r.sectionId))}function f(e){return function(n){var t=e.selectedPinIds,r=e.source,i=e.target;n((0,a.EX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:t,itemType:"pin"})),n((0,a.vX)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:t,itemType:"pin"})),d(e,n)}}function p(e,n){return function(t){return(function(e,n,t){var i=e.inverseSelection,o=e.selectedPinIds,s=e.source,d=e.target,f=e.orbacSubjectId;if(s.boardId===d.boardId&&(s.sectionId||null)===(d.sectionId||null))return Promise.reject();if(i){var p={board_id:s.boardId,new_board_id:d.boardId,old_section_id:s.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:o,orbac_subject_id:f};return r.Z.create("BulkEditSelectAllResource",p).callUpdate({showError:!1}).then(function(){return Promise.all([n(u(s)),n(u(d))])}).catch(c(t))}var h=function(e,t){n((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:o,itemType:"pin"})),n((0,a.vX)({feedId:t.sectionId||t.boardId,feedType:t.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:o,itemType:"pin"}))};h(s,d);var y=function(){return h(d,s)};if(d.boardId===s.boardId){if(d.sectionId){var m={section_id:d.sectionId,pins:o,orbac_subject_id:f};return r.Z.create("BoardSectionEditResource",m).callUpdate({showError:!1}).catch(function(e){y(),c(t)(e)})}var _={section_id:s.sectionId,pins:o,orbac_subject_id:f};return r.Z.create("BoardSectionPinsResource",_).callDelete({showError:!1}).catch(function(e){y(),c(t)(e)})}var b={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:o,orbac_subject_id:f};return r.Z.create("BulkEditResource",b).callUpdate({showError:!1}).catch(function(e){y(),c(t)(e)})})(e,t,n).then(function(){return d(e,t)})}}},409403:function(e,n,t){function r(e,n){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:n}}}function i(e,n){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:n}}}function o(e){return{type:"PIN_SAVE",payload:e}}function a(e,n){return{type:"PIN_UNSAVE",payload:{id:e,nodeId:n}}}function l(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function s(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e.id,value:!1,nodeId:e.nodeId}}}function c(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e.id,value:!0,text:e.text,nodeId:e.nodeId}}}function u(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e.id,value:!0,nodeId:e.nodeId}}}function d(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e.id,value:!1,nodeId:e.nodeId}}}function f(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function p(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}function h(e){return{payload:{id:e.id,nodeId:e.nodeId,resource:e.resource,value:e.value},type:"UPDATE_PIN_TRACKING_PARAMS_MAP"}}t.d(n,{Er:function(){return h},Gb:function(){return a},I1:function(){return s},Ib:function(){return u},Ur:function(){return o},Vw:function(){return l},b9:function(){return f},i0:function(){return d},mO:function(){return i},q1:function(){return c},yR:function(){return r},yj:function(){return p}})},991944:function(e,n,t){t.d(n,{P:function(){return s},u:function(){return l}});var r=t(193163),i=function(e){return e||[]},o=function(e){return e?e.reduce(function(e,n){return null!=n&&n.objects?e.concat(n.objects):e.concat([n].filter(Boolean))},[]):[]},a=function(e){return e&&Array.isArray(e)?e.map(function(e){return e.content_pin}).filter(function(e){return!!e}):[]},l={ApiResource:function(e){if(e&&Array.isArray(e)){var n=[];return e.forEach(function(e){e.call_to_create_source_pin_id?n.push(e):"story"===e.type&&e.objects&&Array.isArray(e.objects)?e.objects.forEach(function(e){n.push(e)}):"pin"===e.type&&n.push(e)}),n}return[]},BaseSearchResource:function(e){return e?o(e.results):[]},BoardContentRecommendationResource:i,BoardFeedResource:i,BoardlessPinsResource:i,BoardSectionPinsResource:i,BoardShopCategoryFeedResource:i,BoardShopSavedProductsFeedResource:i,BrandCatalogFeedResource:i,BusinessProfileUserPinsResource:i,CategoryFeedResource:i,DomainFeedResource:i,IdeaPinStelaResultsResource:i,InterestResource:function(e){return e?e.results:[]},LiveSessionProductsResource:function(e){return e?Object.values(e).reduce(function(e,n){return e.concat(n)},[]):[]},NewsHubDetailsResource:function(e){return e?e.reduce(function(e,n){return n.content_items?e.concat(n.content_items.map(function(e){return e.content_object}).filter(Boolean)):e},[]):[]},PinCatalogResource:i,ProfileCoverFeedResource:i,RelatedModulesResource:o,RelatedPinFeedResource:i,RelatedProductFeedResource:i,RelatedStreamResource:i,SearchResource:i,SectionSuggestionsPinsResource:i,ShoppingFeedModularizedResource:o,TaggedObjectsResource:o,TodayArticleFeedResource:function(e){return(0,r.nx)(e)?e.reduce(function(e,n){if(Array.isArray(n.objects)){var t=[];return n.objects.forEach(function(e){var n;"todayarticle"===e.type&&(null===(n=e.content_pin)||void 0===n?void 0:n.type)==="pin"?t.push(e.content_pin):"pin"===e.type&&t.push(e)}),e.concat(t)}return e},[]):e||[]},TodayTabInterestFeedResource:a,TodayTabResource:a,TopicFeedResource:i,UserDiscoveredPinsResource:i,UserHomefeedResource:o,UserActivityPinsResource:i,UserRecentActivityResource:i,UserStoryPinsFeedResource:i,UserPinsResource:i,VisualLiveSearchResource:function(e){return e?e.results:[]},VisualLiveSearchProductFeedResource:i,VisualLinkVisualSearchResource:i,VisualSearchFlashlightUnifiedResource:function(e){return e?o(e.results):[]},ShoppingListFeedResource:o,ShoppingListRecentlyViewedFeedResource:i,BestPinsFeedAltResource:i,StoryFeedResource:o},s=function(e,n){var t,r=e;switch(e){case"ApiResource":break;case"BaseSearchResource":case"SearchResource":var i=n.query;"blp"===n.auth_lp_type?t=null:i&&(t=encodeURIComponent(i)),r="SearchResource";break;case"BrandCatalogFeedResource":case"RelatedModulesResource":case"RelatedPinFeedResource":case"RelatedProductFeedResource":case"ShoppingFeedModularizedResource":case"VisualSearchFlashlightUnifiedResource":case"BoardShopCategoryFeedResource":t=n.pin;break;case"CategoryFeedResource":t=n.feed;break;case"DomainFeedResource":t=n.domain;break;case"LiveSessionProductsResource":t=n.classId;break;case"NewsHubDetailsResource":t=n.news_id;break;case"BestPinsFeedAltResource":case"TopicFeedResource":t=n.interest;break;case"TodayArticleFeedResource":t=n.id;break;case"StoryFeedResource":t="".concat(n.feed_type,"-").concat(n.request_params)}return t?"".concat(r,"_").concat(t.toLowerCase()):e}},296011:function(e,n,t){var r=(0,t(746074).P1)(function(e){var n=e.users,t=e.boards,r=n[e.session.userId]||null;return Object.keys(t).reduce(function(e,n){var i,o=t[n];return!o.archived_by_me_at&&((null===(i=o.owner)||void 0===i?void 0:i.id)===r.id||o.collaborating_users&&o.collaborating_users.map(function(e){return e.id}).includes(r.id))&&o.cover_images?e.concat([o]):e},[])},function(e){return e.sort(function(e,n){return e.name.localeCompare(n.name)})});n.Z=r},951766:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(780277),i=t(684404),o=t(140017),a=t(339001),l=t(358589),s=t(70660),c=t(819267);function u(e){var n,t=e.boardId,u=e.onBoardSelected,d=e.noArrowIcon,f=e.showSingleBoardRep,p=(0,o.ZP)(),h=(0,r.useSelector)(function(e){return e.boards})[t],y=h.section_count,m=!!y&&y>0,_=(0,l.Z)(),b=null!==(n=h.name)&&void 0!==n?n:"this board";return(0,c.jsx)(i.iP,{accessibilityLabel:(0,a.Wc)("".concat(p._('Select {{ boardName }}', 'board.picker.row.select.board', 'Accessibility label for select board button')),{boardName:b}),onTap:_({fn:function(){return u(m)}}),rounding:2,tapStyle:"compress",children:(0,c.jsx)(s.Z,{boardId:t,noArrowIcon:d,showSingleBoardRep:f})})}},70660:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(672652),i=t(780277),o=t(684404),a=t(140017),l=t(339001),s=t(316667),c=t(274262),u=t(677068),d=t(819267);function f(e){var n=e.boardId,t=e.navigateToBoard,f=e.noArrowIcon,p=e.showCollaborators,h=e.showSingleBoardRep,y=e.shouldShowPinAndSectionCount,m=(0,a.ZP)(),_=(0,i.useSelector)(function(e){return e.boards})[n],b=(_.collaborating_users||[]).map(function(e){var n,t;return{name:null!==(n=e.username)&&void 0!==n?n:"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":null!==(t=e.image_medium_url)&&void 0!==t?t:""}}),g="",v=b.slice(0,3).map(function(e){return e.name});switch(b.length){case 3:g=(0,l.Wc)("".concat(m._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(v[0]),second:"".concat(v[1]),last:"".concat(v[2])});break;case 2:g=(0,l.Wc)("".concat(m._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(v[0]),second:"".concat(v[1])});break;default:g=v.join(", ")}var P=b.length>3?(0,l.Wc)(m.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', b.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:g,leftCount:"".concat(b.length-3)}):(0,l.Wc)("".concat(m._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:g}),S=new o.Ry(0),x=_.pin_count,I=_.section_count,j=(0,d.jsx)(r.Fragment,{children:(0,d.jsx)(o.xu,{"data-test-id":I?"boardWithSection":"boardWithoutSection",children:(0,d.jsxs)(o.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:h?4:0,rounding:2,children:[(0,d.jsx)(o.xu,{paddingY:h?0:2,children:h?(0,d.jsx)(o.xu,{height:48,overflow:"hidden",width:48,children:(0,d.jsx)(o.zd,{height:"100%",rounding:2,width:"100%",children:(0,d.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:_.image_cover_url||" "})})}):(0,d.jsx)(o.xu,{height:60,overflow:"hidden",rounding:4,width:60,children:(0,d.jsx)(u.Z,{boardId:_.id,fullSize:!0,type:"thumbnail"})})}),(0,d.jsxs)(o.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:h?2:4,overflow:h?"hidden":"auto",width:"100%",children:[(0,d.jsx)(o.xv,{lineClamp:h?1:void 0,size:"400",weight:"bold",children:_.name}),y&&(0,d.jsxs)(o.kC,{children:[(0,d.jsx)(o.xv,{inline:!0,children:!!x&&(0,l.nk)(m.ngettext('{{ PinCount }} Pin', '{{ PinCount }} Pins', null != x ? x : 0, 'BoardRow.pinCount', 'Number of Pins on board or section, pinCount: number of Pins'),{PinCount:x})}),!!x&&!!I&&(0,d.jsx)(c.Z,{}),(0,d.jsx)(o.xv,{inline:!0,children:!!I&&(0,l.nk)(m.ngettext('{{ sectionCount }} section', '{{ sectionCount }} sections', null != I ? I : 0, 'BoardRow.sectionCount', 'Number of sections on board, sectionCount: number of sections'),{sectionCount:I})})]})]}),(0,d.jsxs)(o.kC,{alignItems:h?"center":"start",justifyContent:"start",children:["secret"===_.privacy&&(0,d.jsx)(o.xu,{marginStart:h?3:1,children:(0,d.jsx)(o.JO,{accessibilityLabel:m._('secret board icon', ' - ', ' -- '),color:h?"default":"subtle",icon:"lock"})}),_.is_collaborative&&(h||p)&&b.length>0?(0,d.jsx)(o.xu,{zIndex:S,children:(0,d.jsx)(o.HE,{accessibilityLabel:s.U+P,collaborators:b,size:1===b.length?"sm":"xs"})}):_.is_collaborative&&(0,d.jsx)(o.xu,{marginStart:1,children:(0,d.jsx)(o.JO,{accessibilityLabel:m._('group board icon', ' - ', ' -- '),icon:"people"})}),!f&&!!_.section_count&&(0,d.jsx)(o.xu,{"data-test-id":"boardSectionPicker",marginStart:h?3:0,children:(0,d.jsx)(o.JO,{accessibilityLabel:m._('board section board picker icon', ' - ', ' -- '),color:h?"default":"subtle",icon:"arrow-forward"})})]})]})]})})});return t&&_.url?(0,d.jsx)(o.Tg,{href:_.url,rounding:2,tapStyle:"compress",children:j}):j}},900876:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(780277),i=t(328038),o=t(684404),a=t(140017),l=t(870319),s=t(761203),c=t(951766),u=t(339001),d=t(490166),f=t(819267);function p(e){var n,t,i=e.onSectionSelected,l=e.sectionId,s=e.showSectionRep,c=(0,r.useSelector)(function(e){return e.boardsections[l]}),p=(0,a.ZP)(),h=c&&(null===(n=c.preview_pins)||void 0===n?void 0:n[0])&&c.preview_pins[0].image_medium_url,y=null!==(t=c.title)&&void 0!==t?t:"";return(0,f.jsx)(d.Z,{onTouch:i,pressState:"none",rounding:2,children:(0,f.jsxs)(o.xu,{alignItems:"center",column:12,"data-test-id":"sectionPickerRow",display:"flex",marginBottom:s?4:0,rounding:2,children:[s&&(0,f.jsx)(o.xu,{height:48,width:51,children:(0,f.jsx)(o.zd,{height:"100%",rounding:2,width:"100%",children:(0,f.jsx)(o.Ee,{alt:(0,u.Wc)(p._('{{ boardSectionName }} thumbnail', 'SectionPickerRow.boardImage.accessibilityLabel.text', 'Additional text explaining board image thumbnail. boardSectionName:Title of the board section for a11y text'),{boardSectionName:y}),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!=h?h:""})})}),!s&&(0,f.jsx)(o.xu,{column:1,paddingY:2}),(0,f.jsx)(o.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:s?(0,f.jsx)(o.xu,{marginStart:2,overflow:"hidden",width:"100%",children:(0,f.jsx)(o.xv,{lineClamp:1,size:"400",weight:"bold",children:c.title})}):(0,f.jsx)(o.xu,{marginStart:2,children:(0,f.jsx)(o.xv,{weight:"bold",children:c.title})})})]})})}var h=function(e,n){var t=(0,l.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}).isFetching,i=(0,r.useSelector)(function(n){return(n.feeds["board-sections:".concat(e)]||[]).reduce(function(e,n){if("boardsection"===n.type){var t={type:"boardsection",id:n.id};e.push(t)}return e},[])}),o=(0,r.useSelector)(function(t){return i.map(function(e){return e.id}).reduce(function(r,i){var o=t.boardsections[null!=i?i:""];return i!==n&&o&&r.push({board:{id:e},id:o.id,title:o.title,type:"boardsection",slug:o.slug}),r},[])});return{isFetching:t,boardSections:i,filteredBoardSections:o}};function y(e){var n=e.boardId,t=e.originalBoardId,r=e.sectionId,l=e.repin,u=e.hideBoardPickerRow,d=e.showSectionRep,y=(0,a.ZP)(),m=h(n,r),_=m.isFetching,b=m.boardSections,g=m.filteredBoardSections,v=(0,i.k6)(),P=(0,s.gC)()(t||"");return(0,f.jsxs)(o.xu,{children:[b.length>0&&(0,f.jsxs)(o.xu,{paddingY:d?0:3,children:[d&&(0,f.jsx)(o.xu,{paddingY:2,children:(0,f.jsx)(o.xu,{marginBottom:2,children:(0,f.jsx)(o.xv,{children:y._('Board', 'RepinFlow.SectionPickerList.Board', 'Section picker board title')})})}),!u&&(0,f.jsx)(c.Z,{boardId:n,noArrowIcon:!0,onBoardSelected:function(){return l(n,void 0,y)},showSingleBoardRep:d},n),d&&(0,f.jsx)(o.xu,{paddingY:4,children:(0,f.jsx)(o.xv,{children:y._('Section', 'RepinFlow.SectionPickerList.Section', 'Section picker all sections title')})}),g.map(function(e){var r;return(0,f.jsx)(p,{onSectionSelected:function(){if(l(n,e,y),t){var r;v.push(null!==(r=null==P?void 0:P.url)&&void 0!==r?r:"")}},sectionId:null!==(r=e.id)&&void 0!==r?r:"",showSectionRep:d},e.id)})]}),(0,f.jsx)(o.$j,{accessibilityLabel:y._('Loading board section for repin flow', ' - ', ' -- '),show:_})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/80659-ed683bc99927168d.js.map
