"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[56254],{551587:function(e,n){n.Z=function(e){return e.startsWith("enabled")||e.startsWith("employee")}},910711:function(e,n,i){i.d(n,{Z:function(){return d}});var o=i(672652),t=i(684404),a=i(406893),l=i(749886),r=i(771981),s=i(819267);function d(e){var n=e.playing,i=e.zIndexValue;return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,s.jsx)(t.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:l.yR,top:!0,zIndex:i?new t.Ry(i):r.lt,children:!n&&(0,s.jsx)(t.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},983435:function(e,n,i){i.d(n,{Z:function(){return m}});var o=i(672652),t=i(684404),a=i(140017),l=i(558273),r=i(340523),s=i(551587),d=i(5859),u=i(797456),c=i(749886),p=i(214164),v=i(217058),h=i(623409),_=i(554786),g=i(115557),y=i(369708),f=i(819267),b=function(e){var n=e.accessibilityLabel,i=e.dataTestId,o=e.disable,a=e.handleTap,l=e.icon;return(0,f.jsx)(t.xu,{"data-test-id":i,opacity:o?.5:void 0,children:(0,f.jsx)(t.iP,{disabled:o,onTap:a,children:(0,f.jsx)(t.JO,{accessibilityLabel:n,color:"light",icon:l,size:16})})})};function m(e){var n,i,m,x,P=e.activePageIndex,w=e.handlePanelChange,S=e.handlePlay,I=e.handlePause,j=e.handlePausePlay,C=e.handleMute,A=e.handleVideoScrubbingNewPage,E=e.handleWatchAgain,L=e.isPlaying,T=e.isMuted,z=e.isPanelOpen,M=e.pages,V=e.pageCount,k=e.pinId,D=void 0===k?"":k,H=e.progressInfo,O=e.showEndCard,R=e.showVideoControls,Z=void 0!==R&&R,B=e.viewParameter,W=e.isStoryPin,N=void 0===W||W,U=e.captionsUrl,F=e.captionsExpGroup,G=(0,a.ZP)(),J=(H||{}).currentTime,X=(0,p.Hx)().seekTimes,$=(0,d.B)(),K=(0,y.rG)(),Y=(0,r.F)().checkExperiment,q=(0,_.HG)(),Q=$.isAuthenticated,ee=K.captionsEnabled,en=K.setCaptionsEnabled,ei=(0,h.Z)(),eo=M[P],et=(eo||T).should_mute,ea=Object.keys(X).includes(D)&&X[D]?X[D]:J,el=(0,o.useMemo)(function(){return M.map(function(e){var n,i,o,t,a,r,s,d=null===(n=e.blocks)||void 0===n?void 0:n.find(function(e){return 3===e.block_type}),u=(null==d?void 0:null===(i=d.video)||void 0===i?void 0:null===(o=i.video_list)||void 0===o?void 0:null===(t=o.V_HLSV3_MOBILE)||void 0===t?void 0:t.duration)||(null==d?void 0:null===(a=d.video)||void 0===a?void 0:null===(r=a.video_list)||void 0===r?void 0:null===(s=r.V_720P)||void 0===s?void 0:s.duration);return u?{duration:u,isVideo:!0}:{duration:l.oN,isVideo:!1}})},[M]),er=[{duration:(null==H?void 0:H.duration)||0,isVideo:!0}],es=N?el:er,ed=null===(n=(eo&&(null===(x=eo.blocks)||void 0===x?void 0:x[0])||{}).video)||void 0===n?void 0:null===(i=n.video_list)||void 0===i?void 0:null===(m=i.V_HLSV3_MOBILE)||void 0===m?void 0:m.captions_urls,eu=!1;(ed&&0!==Object.keys(ed).length||(void 0===U?"":U))&&(eu=!0);var ec=N&&eu&&q?Y(Q?"auth_desktop_video_pin_captions":"unauth_desktop_video_pin_captions").group:"",ep=(void 0===F?"":F)||ec,ev=(0,s.Z)(ep);ev&&Y(Q?"auth_default_captions_on":"unauth_default_captions_on").anyEnabled&&en(!0);var eh=(0,o.useMemo)(function(){return es.reduce(function(e,n){return e+(n.duration||0)},0)/(N?g.gJ:1)},[es,N]),e_=(0,o.useMemo)(function(){return es.filter(function(e,n){return n<P}).reduce(function(e,n){return e+(n.duration||0)},0)/g.gJ},[es,P]),eg=es.length>0&&es[P].isVideo?ea+e_:5*J+e_,ey=G._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ef=G._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,f.jsxs)(t.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,f.jsxs)(t.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:Z||!L?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,f.jsxs)(t.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,f.jsx)(b,{accessibilityLabel:L?G._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):G._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(L?"pause":"play"),handleTap:O&&E?E:j,icon:L?"pause":"play"}),H&&(0,f.jsxs)(t.xu,{"data-test-id":"time-display",children:[(0,f.jsx)(t.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"".concat((0,c.Lc)(eg))})," ",(0,f.jsx)(t.xu,{display:"inlineBlock",opacity:.6,children:(0,f.jsx)(t.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"/ ".concat((0,c.Lc)(eh))})})]})]}),(0,f.jsxs)(t.kC,{direction:"row",gap:5,children:[(ep.startsWith("enabled_captions")||ep.startsWith("employees"))&&eu&&(0,f.jsx)(b,{accessibilityLabel:ee?ef:ey,dataTestId:"closed-captions-button-".concat(ee?"disable":"enable"),handleTap:function(){var e=q?"desktop_pin_page":"mweb_pin_page";ee?(0,v.My)("".concat(e,".closed_captions_button.toggle_off")):(0,v.My)("".concat(e,".closed_captions_button.toggle_on")),ei({action:"click",item:"closed-captions-button"}),K.setCaptionsEnabled(!ee)},icon:ee?"captions":"captions-outline"}),(0,f.jsx)(b,{accessibilityLabel:T?G._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):G._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(T?"unmute":"mute"),disable:et,handleTap:C,icon:T?"mute":"sound"}),(0,f.jsx)(b,{accessibilityLabel:z?G._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):G._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(z?"maximize":"minimize"),handleTap:w,icon:z?"maximize":"minimize"})]})]}),(0,f.jsx)(u.ZP,{activePageCurrentTime:ea,activePageIndex:P,currentTime:eg,duration:eh,handlePause:I,handlePlay:S,handleVideoScrubbingNewPage:A,isPlaying:L,pageCount:V,pageDurations:es,pinId:D,progressInfo:H,shouldShowPlayhead:!0,showEndCard:O,showVideoControls:Z,videoControlsExp:ev,videoDurations:es,viewParameter:B})]})}},797456:function(e,n,i){i.d(n,{$E:function(){return b},$:function(){return m},ZP:function(){return S}});var o=i(672652),t=i(684404),a=i(587703),l=i(140017),r=i(340523),s=i(5859),d=i(558273),u=i(115557),c=i(819267);function p(e){var n,i,o=e.activePageCurrentTime,a=e.pillHeight,l=e.progressInfo,r=e.videoDuration,s=null!==(n=null==l?void 0:l.currentTime)&&void 0!==n?n:0,p=null!==(i=null==l?void 0:l.duration)&&void 0!==i?i:d.P6,v="".concat(null!=r&&r.isVideo?Math.floor(1e4*(o||s)/(r.duration/u.gJ))/100:s/p*100,"%");return(0,c.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:b}},height:a,overflow:"hidden",rounding:"pill",children:(0,c.jsx)(t.xu,{color:m,dangerouslySetInlineStyle:{__style:{width:v}},height:"100%",rounding:"pill"})})}var v=i(749886),h=i(214164),_=i(554786),g=i(149722);function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,t,a,l,r=[],s=!0,d=!1;try{if(a=(i=i.call(e)).next,0===n){if(Object(i)!==i)return;s=!1}else for(;!(s=(o=a.call(i)).done)&&(r.push(o.value),r.length!==n);s=!0);}catch(e){d=!0,t=e}finally{try{if(!s&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(d)throw t}}return r}}(e,n)||function(e,n){if(e){if("string"==typeof e)return f(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,o=Array(n);i<n;i++)o[i]=e[i];return o}var b="rgba(255,255,255,0.24)",m="light",x=function(){},P=function(e){var n=e.children,i=e.setHoveringChange,o=e.handleMouseDown,a=e.handleMouseLeave,r=e.handleTouchStart,s=e.playhead,d=e.isPlaying,u=e.showVideoControls,p=e.videoControlsExp,v=(0,l.ZP)(),h=!(0,_.HG)();return p?(0,c.jsx)(t.iP,{children:(0,c.jsx)(t.xu,{ref:s,alignItems:"center","aria-label":v._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:h?"center":"start",marginBottom:h?0:6,minHeight:"8px",onFocus:i(!0),onMouseDown:o,onMouseLeave:a,onMouseOver:i(!0),onTouchEnd:function(e){return e.preventDefault()},onTouchStart:r,opacity:p&&(u||!d)?1:0,paddingY:h?6:0,position:"relative",role:"progressbar",width:"100%",children:n})}):(0,c.jsx)(t.xu,{ref:s,alignItems:"center","aria-label":v._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:h?"center":"start",marginBottom:h?0:6,minHeight:"8px",onFocus:i(!0),onMouseDown:o,onMouseLeave:a,onMouseOver:i(!0),onTouchEnd:function(e){return e.preventDefault()},onTouchStart:r,paddingY:h?6:0,position:"relative",role:"progressbar",width:"100%",children:n})},w=function(e){var n=e.currentTime,i=void 0===n?0:n,o=e.inRemoveRelatedStreamsExp,a=e.isMobile,l=e.isRTL,r=e.isSeeking,s=e.scrubberWidth,d=e.videoControlsExp;return(0,c.jsxs)(t.xu,{dangerouslySetInlineStyle:{__style:l?{right:s}:{left:s}},"data-test-id":"video-progress-bar",position:"relative",children:[a&&r&&!o&&(0,c.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{top:"-32px"}},marginStart:-3,position:"absolute",children:(0,c.jsx)(t.xv,{color:"light",size:"100",children:(0,v.Lc)(i)})}),(0,c.jsx)(t.xu,{color:m,height:4,position:"absolute",rounding:"pill",children:(0,c.jsx)(t.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:r&&d?-8:-6}},height:r&&d?16:12,marginStart:-2,rounding:"circle",width:r&&d?16:12})})]})};function S(e){var n=e.activePageIndex,i=e.activePageCurrentTime,l=e.pageCount,d=e.progressInfo,u=e.showEndCard,v=e.duration,f=void 0===v?0:v,b=e.currentTime,S=e.pageDurations,I=void 0===S?[]:S,j=e.handlePlay,C=void 0===j?x:j,A=e.handlePause,E=void 0===A?x:A,L=e.handleVideoScrubbingNewPage,T=void 0===L?x:L,z=e.videoDurations,M=void 0===z?[]:z,V=e.viewParameter,k=e.isInactiveStreamPin,D=void 0!==k&&k,H=e.isPlaying,O=void 0!==H&&H,R=e.setVideoProgress,Z=e.shouldShowPlayhead,B=e.showVideoControls,W=void 0===B||B,N=e.pinId,U=void 0===N?"":N,F=e.videoControlsExp,G=void 0!==F&&F,J=!(0,_.HG)(),X=(0,o.useRef)(null),$=(0,r.F)().checkExperiment,K=(0,s.B)().isRTL,Y=y((0,o.useState)(!1),2),q=Y[0],Q=Y[1],ee=y((0,o.useState)(O),2),en=ee[0],ei=ee[1],eo=y((0,o.useState)(),2),et=eo[0],ea=eo[1],el=(0,a.Z)(),er=(0,h.Hx)().isSeekingIdeaPin,es=(0,h.RC)(),ed=es.updateSeekTime,eu=es.updateSeekingIdeaPin,ec=(0,g.Z)().isAuth,ep=(0,o.useCallback)(function(e,i){if(!D&&i<=l){if(i!==n&&T(i),R){var o;R({currentTime:e/1e3,duration:M[i].isVideo?null!==(o=null==d?void 0:d.duration)&&void 0!==o?o:1:5,pinId:U})}ed(e/1e3,U)}el({event_type:101,view_type:3,view_parameter:V,component:14302})},[n,T,D,el,l,U,null==d?void 0:d.duration,R,ed,M,V]),ev="".concat((void 0===b?0:b)/f*100,"%"),eh=I.map(function(e){return"".concat((e.duration||0)/f/10,"%")}),e_=(0,o.useMemo)(function(){var e=0;return I.map(function(n){var i=n.duration+e,o={min:e,max:i};return e=i,o})},[I]),eg=J&&$(ec?"closeup_auth_mweb_remove_streams":"closeup_unauth_mweb_remove_streams").anyEnabled,ey=q?"0 1.2px":"0 1px",ef=function(e){return function(){return Q(e)}},eb=(0,o.useCallback)(function(e){if(X.current){var n=X.current.getBoundingClientRect(),i=n.left,o=n.right,t=n.width,a=void 0===t?0:t,l=(K?Math.max(0,Math.min(((void 0===o?0:o)-e)/a,1)):Math.max(0,Math.min((e-(void 0===i?0:i))/a,1)))*f*1e3,r=e_.findIndex(function(e){return l>=e.min&&l<=e.max}),s=-1===r?0:r;ep(l-e_[s].min,s)}},[f,ep,e_,K]),em=function(){er||(ei(O||u),eu(!0))},ex=(0,o.useCallback)(function(e){er&&eb(e.pageX)},[eb,er]),eP=(0,o.useCallback)(function(e){if(er){e.preventDefault();var n=Array.from(e.changedTouches).find(function(e){return e.identifier===et});n&&eb(n.pageX)}},[er,eb,et]),ew=(0,o.useCallback)(function(){eu(!1),ef(!1),ea(void 0),en&&C()},[eu,C,en]),eS=(0,o.useCallback)(function(e){Array.from(e.changedTouches).find(function(e){return e.identifier===et})&&(eu(!1),ef(!1),ea(void 0)),en&&C()},[C,en,et,eu]);return(0,o.useEffect)(function(){return er&&!D&&(window.addEventListener("mousemove",ex),window.addEventListener("mouseup",ew),window.addEventListener("touchmove",eP),window.addEventListener("touchend",eS)),function(){window.removeEventListener("mousemove",ex),window.removeEventListener("mouseup",ew),window.removeEventListener("touchmove",eP),window.removeEventListener("touchend",eS)}},[ex,ew,eS,eP,D,er,eb,et]),(0,c.jsxs)(P,{handleMouseDown:function(e){em(),O&&E(),eb(e.pageX)},handleMouseLeave:function(){ef(!1)},handleTouchStart:function(e){em(),ef(!0);var n=e.changedTouches[0];ea(n.identifier),O&&E(),eb(n.pageX)},isPlaying:O,playhead:X,setHoveringChange:ef,showVideoControls:W,videoControlsExp:G,children:[void 0!==Z&&Z&&(W&&G||q||er||J)&&(0,c.jsx)(w,{currentTime:i,inRemoveRelatedStreamsExp:eg,isMobile:J,isRTL:K,isSeeking:er,scrubberWidth:ev,videoControlsExp:G}),Array(l).fill().map(function(e,o){return(0,c.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{margin:ey}},flex:"grow",width:eh.length===l?eh[o]:"auto",children:(0,c.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:o<n||u?(0,c.jsx)(t.xu,{color:m,height:4,rounding:"pill"}):n===o&&d?(0,c.jsx)(p,{activePageCurrentTime:i,pillHeight:4,progressInfo:d,videoDuration:M[o]}):(0,c.jsx)(t.xu,{color:m,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},"".concat(U,"-").concat(o))})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/56254-7f444fd80af558fd.js.map
